webpackJsonp([25],{0:function(e,t,i){i(1723),i(1744),i(1745),i(1746),i(1747),i(1748),i(1749),i(1750),e.exports=i(1751)},942:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(214),a=i(136),r=i(943),l=i(946),u=i(947),p=n.extend({name:"EmbedManager",harnessCollection:{},harnessRequests:{},requestID:0,currentlyPlaying:null,initialize:function(){return r.on("embed*",o.bind(this._handleMessage,this)),this.listenTo(a,"CrtControl:playerCreated",this.createCrtHarness),this.on("harnessCreated",this.__onHarnessCreated),this},createCrtHarness:function(e){e.on("ready",o.bind(function(){var t=e.$el.attr("id");t in this.harnessCollection||(this.harnessCollection[t]=new u(e,t),this.trigger("harnessCreated",this.harnessCollection[t]))},this)),e.on("teardown",o.bind(function(){var t=e.$el.attr("id");this.currentlyPlaying===this.harnessCollection[t]&&(this.currentlyPlaying=null),delete this.harnessCollection[t]},this))},createHarness:function(e){e.embedID in this.harnessCollection?this.harnessCollection[e.embedID].channel.setWindow(e.source):(this.harnessCollection[e.embedID]=new l(e),this.trigger("harnessCreated",this.harnessCollection[e.embedID]))},getHarness:function(e){var t=s.Deferred();return this.harnessCollection[e]?t.resolve(this.harnessCollection[e]):(t.requestID=++this.requestID,t.embedID=e,this.harnessRequests[t.requestID]=t),t.promise()},_handleMessage:function(e){var t,i=/^(embed\-.+?)\:(.+?)\:(.+?)\:_syn$/,o=JSON.parse(e.data);o&&o.method&&(t=o.method.match(i))&&(o.embedID=t[1],o.service=t[2],o.postID=t[3],o.source=e.source,this.createHarness(o))},__onHarnessCreated:function(e){o.forEach(this.harnessRequests,o.bind(function(t){t.embedID===e.getData().embedID&&(t.resolve(e),delete this.harnessRequests[t.requestID])},this)),this.listenTo(e,"stateChange",this.__onHarnessStateChange)},__onHarnessStateChange:function(e,t){"playing"===e||"focus"===e?(this.currentlyPlaying&&this.currentlyPlaying!==t&&this.currentlyPlaying.pause(),this.currentlyPlaying=t):this.currentlyPlaying===t&&(this.currentlyPlaying=null)}});e.exports=new p},946:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(214),a=i(943),r=i(136),l=i(138),u="autoplaying",p=n.extend({name:"MediaEmbedHarness",$post:null,channel:null,watcher:null,_data:{service:"",embedID:"",postID:"",source:""},videoState:"",initialize:function(e){e.embedID&&(this._data=s.pick(e,s.keys(this._data)),this.$iframe=o("#"+this._data.embedID),this.iframe=this.$iframe.get(0),this.$post=this.$iframe.closest(".post"),this.post=this.$post.get(0),this.postId=this.$post.data("post-id"),this.isPinned=this.$post.data("is-pinned"),this.channel=new a({namespace:this._data.embedID+":"+this._data.service+":"+this._data.postID,window:this._data.source}),this.channel.on_connection(s.bind(function(){this.channel.listen_to("stateChanged",this.__onStateChange,this),this.channel.listen_to("playerReady",this.__autoplayPinnedPost,this),this.channel.listen_to("heightChanged",this.__onHeightChange,this)},this)),this._setupWatcher())},__autoplayPinnedPost:function(){this.isPinned&&this.autoplay()},autoplay:function(){this.channel&&this.channel.send("autoplay")},play:function(){this.channel&&this.channel.send("play")},pause:function(){this.channel&&this.channel.send("pause")},getState:function(){this.channel.call("getState").then(function(e,t){return t})},getData:function(){return this._data},_setupWatcher:function(){this.post&&(this.watcher=l.create(this.post,-52),this.watcher.fullyEnterViewport(s.bind(function(){this.videoState===u&&this.autoplay(),this.trigger("fullyEnterViewport")},this)),this.watcher.partiallyExitViewport(s.bind(function(){this.trigger("partiallyExitViewport")},this)),this.watcher.exitViewport(s.bind(function(){this.trigger("exitViewport")},this)))},__onStateChange:function(e){this.videoState=e;var t={loggingData:s.extend({},s.omit(this._data,"source"),{state:e})};t.loggingData.postID&&"null"!==t.loggingData.postID||(t.loggingData.postID=this.postId?this.postId.toString():""),this.trigger("stateChange",e,this),r.trigger("post:embed:stateChange",t)},__onHeightChange:function(e){this.$iframe.parent().addBack().height(e)}});e.exports=p},947:function(e,t,i){"use strict";var o=i(8),s=i(946),n=s.extend({player:{},$post:{},initialize:function(e,t){this.player=e,this.post=this.player.$el.closest(".post")[0],this.$post=o(this.post),this._data={},this._data.embedID=t,this._data.service="tumblr",this._data.postID=this.$post.data("post-id"),this.connected=!0,this._setupWatcher(),this.listenTo(this.player,"change:paused",this.__onStateChange),this.listenTo(this.player,"change:autoplay",this.__onStateChange)},play:function(){var e=this.getState();"autoplaying"===e?this.player.restart():"playing"!==e&&this.player.play({onDock:!0})},pause:function(){"paused"!==this.getState()&&this.player.pause()},getState:function(){var e=this.player.get("paused"),t=this.player.get("autoplay");return e?"paused":t?"autoplaying":"playing"},__onStateChange:function(){var e=this.getState();s.prototype.__onStateChange.call(this,e)}});e.exports=n},964:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(187),a=function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=0;t<e.length;t++)if(!s.isUndefined(document.createElement("div").style[e[t]]))return!0;return!1}(),r=new n({before:{initialize:function(){this._draggable={dragging:!1,dragX:!1,$doc:o(document),pointerDown:!1,transform:a},this.events=s.extend({"mousedown [data-draggabletags]":"_dragEvents","touchstart [data-draggabletags]":"_dragEvents","touchmove [data-draggabletags]":"_dragEvents","mouseleave [data-draggabletags]":"_dragEvents","mouseup [data-draggabletags]":"_dragEvents","touchend [data-draggabletags]":"_dragEvents","click [data-draggabletags] a":"_dragLinkHandler"},s.result(this,"events")),this.$el.one("mouseenter",s.bind(this._dragSetup,this))}},_dragSetup:function(){this._dragOverflowing()&&this.$el.addClass("draggable")},_dragGetInnerEl:function(){return this._draggable.$dragInner||(this._draggable.$dragInner=this.$("[data-draggabletags]")),this._draggable.$dragInner},_dragOverflowing:function(){return this.$el.width()<this._dragGetInnerEl().width()},_dragCheckMouseOut:function(e){var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||this._dragEnd(e)},_dragGetDimensions:function(){var e=this.$el.width(),t=this._dragGetInnerEl().width();return{parentWidth:e,innerWidth:t,maxLeft:0,maxRight:e-t-10}},_dragEvents:function(e){switch(e.type){case"mousedown":case"touchstart":this._dragStart(e);break;case"mousemove":case"touchmove":this._draggable.pointerDown&&this._dragMove(e);break;case"touchend":case"mouseup":this._dragEnd(e)}},_dragBindDocEvents:function(){this._draggable.$doc.on("mousemove.tagsDraggable",s.bind(this._dragEvents,this)),this._draggable.$doc.on("mouseup.tagsDraggable",s.bind(this._dragReset,this)),this._draggable.$doc.on("mouseout",s.bind(this._dragCheckMouseOut,this))},_dragUnbindDocEvents:function(){this._draggable.$doc.off("mousemove.tagsDraggable"),this._draggable.$doc.off("mouseup.tagsDraggable"),this._draggable.$doc.off("mouseout")},_dragLinkHandler:function(e){this._draggable.dragging&&(e.stopPropagation(),e.preventDefault())},_dragStart:function(e){if(e.preventDefault(),!this._draggable.dragging&&!this._draggable.pointerDown&&this._dragOverflowing()){var t=s.parseInt(this.$el.css("padding-left").replace("px",""));this._draggable.pointerDown=!0,this._draggable.startX=this._dragGetInnerEl().position().left-t,this._draggable.pageX="pageX"in e?e.pageX:e.originalEvent.touches[0].pageX,this._dragBindDocEvents()}},_dragMove:function(e){e.preventDefault(),e.stopPropagation(),this._dragGetInnerEl().addClass("dragging"),this._draggable.dragging=!0;var t=("clientX"in e?e.clientX:e.originalEvent.touches[0].clientX)-this._draggable.pageX;this._draggable.dragX=t+this._draggable.startX,this._dragSet(this._draggable.dragX)},_dragSet:function(e){this._draggable.transform?this._dragGetInnerEl().css("transform","translate("+e+"px, 0)"):this._dragGetInnerEl().css("left",e)},_dragResetPosition:function(){var e=this._dragGetDimensions();this._draggable.dragX>e.maxLeft?this._dragSet(e.maxLeft):this._draggable.dragX<e.maxRight&&this._dragSet(e.maxRight)},_dragEnd:function(e){e.preventDefault(),e.stopPropagation();var t=s.bind(this._dragReset,this);s.delay(t,100)},_dragReset:function(){(this._draggable.dragging||this._draggable.pointerDown)&&(this._draggable.dragging=!1,this._draggable.pointerDown=!1,this._dragGetInnerEl().removeClass("dragging"),this._dragResetPosition(),this._dragUnbindDocEvents())}});e.exports=r},1321:function(e,t,i){"use strict";var o=i(214),s=i(136),n=i(838),a=i(1322),r=o.extend({name:"AbuseForm",initialize:function(){this.drawerManager=n(),this.bindEvents()},bindEvents:function(){this.listenTo(s,"abuseform:open",this.open),this.listenTo(s,"abuseform:close",this.close)},close:function(){this.drawerManager.close()},open:function(e){this.drawerManager.isSuspended()||(this.drawerManager.isOpen()?this.drawerManager.replace(a,e):this.drawerManager.open(a,e))}});e.exports=r},1322:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(129),a=i(136),r=i(191),l=i(180),u=i(1323),p=i(1328),d=i(1330),h=i(1332),c=i(1341),m=i(1342),g=i(1343),_=i(1345),f=i(1346),b=i(1347),v=i(1053),y=i(1340),w=u.extend({templates:{layout:_,success:f,error:b},className:"abuse-form",survey:y,initialize:function(e){if(e=e||{},u.prototype.initialize.call(this,e),this.set("mobileMode",e.mobileMode||!1),this.listenTo(a,"drawer:close",this.teardown),this.contexts=w.CONTEXTS,e.mode)switch(this.mode=e.mode,this.mode){case"standalone":var t=e.formType;e.formType&&this.survey[t]&&"start"!==t||(t="abuse"),this.set("surveyStep",t);break;case"blogcard":this.set("surveyStep","start"),this.tumblelog=new r({name:e.tumblelog}),this.posts=this.getBlogcardPosts();break;case"post":this.set("surveyStep","start"),this.tumblelog=new r({name:e.post.get("tumblelog_name")}),this.posts=[{id:e.post.get("post_id"),rootId:e.post.get("root_id"),postUrl:e.post.get("post_url")}],this.embedCode=e.post.get("embed_code");break;case"chat_message":var t=e.formType;e.formType&&this.survey[t]&&"start"!==t||(t="abuse"),this.set("surveyStep",t);break;case"message":this.set("surveyStep","start"),this.sender=e.sender&&new r({name:e.sender}),this.tumblelog=new r({name:e.post.get("tumblelog-name")}),this.posts=[{id:e.post.get("id"),rootId:e.post.get("root_id"),postUrl:e.post.get("post_url")}];break;default:this.mode="standalone",this.set("surveyStep","abuse")}else this.mode="standalone",this.set("surveyStep","abuse");this.fillTemplateAttributes()},teardown:function(){o("body").removeClass("abuseform-open"),this.selfDestroyTimer&&(clearTimeout(this.selfDestroyTimer),this.selfDestroyTimer=null)},fillTemplateAttributes:function(){var e=n.get("Components/AbuseForm")||{};if(this.set("nativeApp",e.native_app||!1),this.templateAttributes.Flags=l,this.templateAttributes.recaptcha=e.recaptcha,this.templateAttributes.email=e.email,this.templateAttributes.lang=e.lang,this.templateAttributes.languageNotice=e.language_notice,this.templateAttributes.formToken=e.form_token,this.templateAttributes.safesearch=o(".nsfw_filter_enabled").length,this.templateAttributes.tumblelog=this.tumblelog,this.templateAttributes.posts=this.posts,this.templateAttributes.mode=this.mode,this.templateAttributes.hideTitles="standalone"===this.mode,this.templateAttributes.inNativeApp=!!this.get("nativeApp"),this.templateAttributes.prefillFields=e.prefill_fields,this.templateAttributes.prefillFields){if(s.delay(function(){a.trigger("drawerform:validation:trigger")}),this.templateAttributes.prefillFields.urlreporting){var t=this.templateAttributes.prefillFields.urlreporting,i=v.isUrl(t);i||(this.templateAttributes.prefillFields.urlreporting="")}if(this.templateAttributes.prefillFields.email){var r=this.templateAttributes.prefillFields.email,u=v.isEmail(r);u||(this.templateAttributes.prefillFields.email="")}}this.tumblelog&&(this.templateAttributes.tumblelogUrl=this.tumblelog.get("url")),this.templateAttributes.sender=this.sender,this.templateAttributes.supportsFileChooser=this.supportsFileChooser()},getBlogcardPosts:function(){var e=this.tumblelog.get("highlighted_post"),t=[];return s.each(e,function(e){e=o(e),t.push({id:e.data("id"),rootId:e.data("root_id"),postUrl:e.data("json").share_popover_data.post_url})},this),t},getFlaggedContent:function(){switch(this.mode){case"post":case"message":return o('.post[data-post-id="'+this.posts[0].id+'"]').first();case"blogcard":var e=o(".indash_header_wrapper.tumblelog_name_"+this.tumblelog).first();return 0===e.find(".recent_posts").length&&(e=e.closest(".popover")),e}},hideFlaggedContent:function(){var e=this.getFlaggedContent();e&&e.addClass("is_flagged")},displaySuccessMessage:function(){this.templateAttributes.customSuccessMessage=!1,this.survey[this.get("surveyStep")].customSuccessMessage&&(this.templateAttributes.customSuccessMessage=this.survey[this.get("surveyStep")].customSuccessMessage),this.templateAttributes.alternativeResponseText=this.get("surveyStep").indexOf("someoneelse")>=0,this.$el.html(this.templates.success(this.templateAttributes)),a.trigger("drawer:disableCloseConfirmation"),this.selfDestroyTimer&&clearTimeout(this.selfDestroyTimer),this.selfDestroyTimer=setTimeout(function(){a.trigger("abuseform:close"),a.trigger("Kraken:abuseform:close")},15e3)},displayErrorMessage:function(e){this.removeErrorMessage(),this.errorMessage=o(this.templates.error(s.extend(this.templateAttributes,{errors:e}))),this.errorMessage.appendTo(this.$surveyStep)},removeErrorMessage:function(){this.errorMessage&&(this.errorMessage.remove(),this.errorMessage=null)},getPlatform:function(){return this.get("nativeApp")?this.get("nativeApp"):this.get("mobileMode")?"mobileweb":"web"},logSubmission:function(e){e=e||{},e.reason||(e.reason=this.get("surveyStep")),e.blocked=this.get("blockFlagSet"),e.platform=this.getPlatform(),a.trigger("Kraken:abuseform:submitted",{loggingData:e}),this.get("blockFlagSet")&&a.trigger("Kraken:blocks:block_added",{loggingData:{from:"abuseform"}})},update_description:function(e){this.header.remove(),this.header=new p({title:e.title,description:e.description,inNativeApp:this.templateAttributes.inNativeApp}),this.header.render().$el.insertBefore(this.$surveyContainer)},render:function(){return this.$el.append(this.templates.layout(this.templateAttributes)),this.$surveyContainer=this.$(".survey"),this.$surveyStep=this.$(".survey-step"),o("body").addClass("abuseform-open"),this.header=new p({title:this.survey[this.get("surveyStep")].title,description:this.survey[this.get("surveyStep")].description,inNativeApp:this.templateAttributes.inNativeApp}),this.header.render().$el.insertBefore(this.$surveyContainer),"standalone"!==this.mode&&(this.contentPreview=new d({abuseform:this}),this.contentPreview.render().$el.insertAfter(this.$surveyContainer)),this.formView=new c({el:this.$surveyStep,abuseform:this,recaptcha:this.templateAttributes.recaptcha}),this.navigation=new g({abuseform:this}),this.dynamicfields=new m({el:this.$surveyContainer,abuseform:this}),this.surveyView=new h({el:this.$surveyContainer,abuseform:this}),this.surveyView.displaySurveyStep(this.get("surveyStep")),this}});e.exports=w},1323:function(e,t,i){"use strict";var o=i(1324);e.exports=o},1324:function(e,t,i){"use strict";var o=i(8),s=i(219),n=i(130),a=i(230),r=i(136),l=i(1325),u=i(1326),p=i(1327),d=s.extend({mixins:[a],templateAttributes:{__:n,formKey:o("#tumblr_form_key").attr("content")},initialize:function(e){e=e||{},this.set("complete",!1),this.fieldValidation=new u({el:this.$el}),this.imageUpload=new l({el:this.$el}),this.errortags=new p({mobileMode:"undefined"!=typeof e.mobileMode&&e.mobileMode}),this._bindEvents()},_bindEvents:function(){this.listenTo(r,"drawer:close",this._teardown),this.listenTo(r,"drawerform:validation",this._updateCompleteStatus)},_updateCompleteStatus:function(e){this.set("complete",e.status)},_teardown:function(){this.fieldValidation.remove(),this.imageUpload.remove(),this.errortags.remove()},isAndroidKitKatWebView:function(e){if(null==e)return!1;e=e.toLowerCase();var t=e.indexOf("android 4.4")!==-1,i=e.indexOf("version/")!==-1;return t&&i},supportsFileChooser:function(){return!this.isAndroidKitKatWebView(navigator.userAgent)}});e.exports=d},1325:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(219),r=i(136),l=15e6,u=a.extend({events:{"change .image-upload":"onImageUploadClick","click .btn-remove-uploaded":"onRemoveImageClick"},onImageUploadClick:function(e){var t=e.currentTarget;if(this.imageUploadEl=o(".image-upload-input"),this.imagePreviewEl=o(".image-upload-preview"),t.files&&t.files[0]){if(t.files[0].size>l)return r.trigger("drawerform:errortag:show",{field:this.imageUploadEl,text:n("File is too big.")}),void o(t).replaceWith(o(t).val("").clone(!0));r.trigger("drawerform:errortag:remove",{field:this.imageUploadEl}),this.imageUploadEl.addClass("hidden");var i=new FileReader;i.readAsDataURL(t.files[0]),i.onload=s.bind(function(e){this.imagePreviewEl.removeClass("hidden"),e.target.result&&e.target.result.length?(this.imagePreviewEl.find("img").attr("src",e.target.result),this.imagePreviewEl.addClass("shown")):this.imageUploadEl.removeClass("hidden")},this)}},onRemoveImageClick:function(e){e.preventDefault();var t=o(".image-upload-input input");t.replaceWith(t.val("").clone(!0)),o(".image-upload-input input").trigger("change"),this.imagePreviewEl.removeClass("shown"),this.imageUploadEl.removeClass("hidden")}});e.exports=u},1326:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(219),r=i(136),l=i(1053),u=5e3,p=350,d=20,h=a.extend({events:{'change [data-validate-input="dropdown"]':"fieldValidationHandler",'keyup [data-validate-input="name"]':"fieldValidationHandler",'blur [data-validate-input="name"]':"fieldValidationHandler",'keyup [data-validate-input="email"]':"fieldValidationHandler",'blur [data-validate-input="email"]':"fieldValidationHandler",'keyup [data-validate-input="text"]':"fieldValidationHandler",'blur [data-validate-input="text"]':"fieldValidationHandler",'keyup [data-validate-input="text-abuse-form"]':"fieldValidationHandler",'blur [data-validate-input="text-abuse-form"]':"fieldValidationHandler",'keyup [data-validate-input="url"]':"fieldValidationHandler",'blur [data-validate-input="url"]':"fieldValidationHandler",'keyup [data-validate-input="tumblr_url"]':"fieldValidationHandler",'blur [data-validate-input="tumblr_url"]':"fieldValidationHandler",'change [data-validate-input="file"]':"fieldValidationHandler",'change [data-validate-input="checkbox"]':"validateAllFields"},validationErrorMessages:{name:"Name length has to be within 1 ~ "+d.toString()+" characters",text:"Under 5000 characters, please","text-abuse-form":"Under 350 characters, please",email:"We gotta write you back, though",url:"Invalid URL",tumblr_url:"Invalid Tumblr post/media permalink"},initialize:function(){this.listenTo(r,"drawerform:validation:trigger",this.validateAllFields)},validateAllFields:function(){var e=o("[data-validate-input]"),t=e.length>0;s.each(e,function(e){var i=o(e),s=i.data("validate-input"),n=i.val(),a=i.prop("required");if(!this.isFieldValid(n,s,a))return t=!1,!1},this),r.trigger("drawerform:validation",{status:t})},fieldValidationHandler:function(e){var t=o(e.target),i=t.val().trim(),s=t.data("validate-input"),a=t.prop("required");this.isFieldValid(i,s,a)?(t.hasClass("error")&&t.removeClass("error"),r.trigger("drawerform:errortag:remove",{field:t}),"focusout"!==e.type||"url"!==s&&"tumblr_url"!==s||!i.length||0===i.indexOf("http")||o(e.target).val("http://"+i)):"focusout"===e.type&&(t.addClass("error"),r.trigger("drawerform:errortag:show",{field:t,text:n(this.validationErrorMessages[s])})),this.validateAllFields()},isFieldValid:function(e,t,i){var o;if(i="undefined"!=typeof i&&i,l.isBlank(e))return!i;switch(t){case"name":o=l.maxLength(e,d);break;case"email":o=l.isEmail(e);break;case"text":o=l.maxLength(e,u);break;case"text-abuse-form":o=l.maxLength(e,p);break;case"file":o=!0;break;case"dropdown":o=!0;break;case"url":o=l.isUrl(e);break;case"tumblr_url":o=l.isTumblrUrl(e);break;case"checkbox":o=this.isAtLeastOneChecked()}return o},isAtLeastOneChecked:function(){var e=o('input[type="checkbox"]:checked');return e.length>0}});e.exports=h},1327:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(230),r=i(219),l=i(136),u=i(235),p=r.extend({mixins:[a],el:".form-container",defaultText:"A few details, please",initialize:function(e){this.set("mobileMode",!("undefined"==typeof e||!e.mobileMode)&&e.mobileMode),this.errorTags={},this.listenTo(l,"drawerform:errortag:show",this.showErrorTag),this.listenTo(l,"drawerform:errortag:remove",this.removeErrorTag),this.listenTo(l,"drawerform:errortag:removeall",this.removeAllErrorTags)},showErrorTag:function(e){if("undefined"!=typeof e&&e.field){var t=e.field,i=e.text||n(this.defaultText),a=t.attr("name");if(!this.errorTags[a])if(this.errorTags[a]=o("<div>").addClass("drawer-error-tag").text(i),this.get("mobileMode")){this.groupName&&this.labelName||(this.formClass=t.parents(".form").parent().attr("class"),"help-form"===this.formClass?(this.groupName=".form-group",this.labelName=".group-label"):"abuse-form"===this.formClass&&(this.groupName=".form-row",this.labelName=".row-label"));var r=t.parents(this.groupName),l=r.find(this.labelName);this.errorTags[a].addClass(a).appendTo(l),u.animate(this.errorTags[a],"fadeIn",{duration:100,easing:"easeInOut"}),u.animate(this.errorTags[a],"fadeOut",{duration:100,easing:"easeIn",delay:3e3,complete:s.bind(function(){this.removeErrorTag({field:t})},this)})}else"undefined"==typeof this.drawer&&(this.$drawer=o(".drawer"),this.$drawer.on("scroll",s.bind(this.updateErrortagPosition,this))),this.errorTags[a].css({top:t.offset().top,right:this.$drawer.width()}).insertAfter(this.$drawer),u.animate(this.errorTags[a],{translateX:["-5px","0px"]},{duration:100,easing:"easeInOut"})}},removeErrorTag:function(e){var t=e.field,i=t.attr("name");"undefined"!=typeof this.errorTags&&this.errorTags[i]&&(this.errorTags[i].remove(),delete this.errorTags[i])},removeAllErrorTags:function(){"undefined"!=typeof this.errorTags&&this.errorTags&&s.each(this.errorTags,function(e,t){e&&(e.remove(),e="",delete this.errorTags[t])},this)},updateErrortagPosition:function(){"undefined"!=typeof this.errorTags&&this.errorTags&&s.each(this.errorTags,function(e,t){var i=o('.form-container [name="'+t+'"]');i.length||(i=o('form [name="'+t+'"]')),i?e.css({top:i.offset().top}):(e.remove(),this.removeErrorTag({field:i}))},this)},remove:function(){return this.removeAllErrorTags(),"undefined"!=typeof this.$drawer&&this.$drawer.off("scroll",s.bind(this.updateErrortagPosition,this)),r.prototype.remove.apply(this)}});e.exports=p},1328:function(e,t,i){"use strict";var o=i(130),s=i(219),n=i(1329),a=s.extend({className:"form-header",initialize:function(e){return e=e||{},this.templateAttributes={__:o,title:"undefined"!=typeof e.title?e.title:"",description:"undefined"!=typeof e.description?e.description:"",inNativeApp:e.inNativeApp},this},render:function(){return this.$el.html(n(this.templateAttributes)),this}});e.exports=a},1329:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<h1 class="form-heading"> ',__p+=title?" "+(null==(__t=__(title))?"":__t)+" ":" "+__e(__("Report this"))+" ",__p+=' </h1><div class="form-description"> ',description instanceof Array?(__p+=" ",_.each(description,function(e){__p+=" ",__p+=e.link?' <p class="description-multiline">'+(null==(__t=__(e.text,'<a target="_blank" href="'+e.link+'">',"</a>"))?"":__t)+"</p> ":' <p class="description-multiline">'+(null==(__t=__(e.text))?"":__t)+"</p> ",__p+=" "}),__p+=" "):__p+=description?" "+(null==(__t=__(description))?"":__t)+" ":inNativeApp?" "+(null==(__t=__("Seeing something you shouldn't? This is the place to tell us about it."))?"":__t)+" ":" "+(null==(__t=__("Seeing something you shouldn't? This is the place to tell us about it. %1$sLearn more%2$s about how we handle these matters and what you can do to help.",'<a href="/docs/discovery#moderationheader" target="_blank">',"</a>"))?"":__t)+" ",__p+=" </div>";return __p}.toString()).apply(void 0,_values(_imports))},1330:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(136),r=i(219),l=i(235),u=i(660),p=i(1331),d=r.extend({className:"content-preview hidden",template:p,templateAttributes:{__:n},animation:{collapseDuration:300,expandDuration:350,easing:[.545,.42,.435,1.065]},events:{"click .toggle-preview":"togglePreview"},initialize:function(e){e=e||{},this.abuseform=e.abuseform,this.mode=e.abuseform.mode,this.tumblelog=e.abuseform.tumblelog,this.posts=e.abuseform.posts,this.listenTo(a,"abuseform:contentpreview:close",this.hidePreview),this.isExpanded=!0},togglePreview:function(){this.isExpanded?this.hidePreview():this.showPreview()},hidePreview:function(){this.isExpanded&&(this.animateContentPreview(!0),this.animatePostContainer(!0),this.isExpanded=!1)},showPreview:function(){this.isExpanded||(this.animateContentPreview(!1,s.bind(this.scrollToPost,this)),this.animatePostContainer(!1),this.isExpanded=!0)},animateContentPreview:function(e,t){var i;if(e)i=o(".form-container").height()-this.$el.position().top+50;else{var n=o(".survey");i=n.outerHeight(!0)+n.position().top-this.$el.position().top}l.animate(this.$el,{translateY:[i,0]},{duration:e?this.animation.collapseDuration:this.animation.expandDuration,easing:this.animation.easing,complete:s.bind(function(){this.$el.toggleClass("is-hidden"),e?l.animate(this.$el,{translateY:[0,50]},{delay:50,duration:this.animation.collapseDuration,complete:s.bind(function(){this.$el.attr("style","")},this)}):this.$el.attr("style",""),"function"==typeof t&&t()},this)})},animatePostContainer:function(e){l.animate(this.$contentPreviewContainer,{translateY:e?[0,0]:[0,200],opacity:e?[0,1]:[1,0],"max-height":e?[0,99999]:[99999,99999]},{delay:.3*(e?this.animation.collapseDuration:this.animation.expandDuration),duration:e?this.animation.collapseDuration:this.animation.expandDuration,easing:this.animation.easing})},scrollToPost:function(){this.$el.velocity("scroll",{container:o(".drawer")})},cloneFlaggedContent:function(){switch(this.mode){case"post":var e=this.abuseform.getFlaggedContent();if(e.length){var t=this.cleanupClonedPost(e);this.attachFlaggedContent(t)}else this.attachFlaggedContent(this.abuseform.embedCode),o.getScript("/post.js");break;case"blogcard":this.blogCardView=new u({model:this.tumblelog}),this.listenToOnce(this.blogCardView,"ready",function(){this.attachFlaggedContent(this.blogCardView.render().el)});break;case"message":var i=this.abuseform.getFlaggedContent();this.attachFlaggedContent(i.clone())}},cleanupClonedPost:function(e){e.hasClass("is_video")&&e.find(".dockable_video_embed").hasClass("docked")&&(e=e.find(".dockable_video_embed"));var t=e.clone();return t.hasClass("post_full")&&t.find(".post_avatar").remove(),t.find(".dock_video_button")&&t.find(".dock_video_button").remove(),t},attachFlaggedContent:function(e){e&&(this.$contentPreviewContainer.append(e),this.$el.removeClass("hidden"))},render:function(){return this.$el.append(this.template(this.templateAttributes)),this.$contentPreviewContainer=this.$(".content-preview-container"),this.cloneFlaggedContent(),this}});e.exports=d},1331:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="content-preview-toggle toggle-preview"><span class="hide-preview">'+__e(__("Hide"))+'</span><span class="show-preview">'+__e(__("Show"))+'</span></div><div class="content-preview-container"></div>';return __p}.toString()).apply(void 0,_values(_imports))},1332:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(235),a=i(219),r=i(136),l=i(1333),u=i(1335),p=i(1336),d=i(1337),h=i(1338),c=i(1339),m=i(1340),g=a.extend({survey:m,templates:{surveyStep:u,surveyOptions:p,surveyMessage:d,surveyForm:h},duration:200,events:{"click [data-survey-nav-to]":"surveyLinkHandler","click [data-survey-nav-back]":"surveyBackHandler"},initialize:function(e){e=e||{},this.abuseform=e.abuseform,this.abuseform.on("change:complete",s.bind(this.updateSubmitButton,this)),this.abuseform.on("change:loading",s.bind(this.updateLoadingIndicator,this)),this.history=[],this.$surveyContainer=this.abuseform.$surveyContainer,this.$surveyStep=this.abuseform.$surveyStep},updateSubmitButton:function(){this.abuseform.get("complete")===!0?this.submitButton.removeAttr("disabled"):this.submitButton.attr("disabled","disabled")},updateLoadingIndicator:function(){this.submitButton.toggleClass("loading",this.abuseform.get("loading"))},surveyLinkHandler:function(e){this.history.push(this.abuseform.get("surveyStep"));var t=o(e.currentTarget).data("survey-nav-to");this.displaySurveyStep(t)},surveyBackHandler:function(){var e=this.history.pop();this.displaySurveyStep(e,!0)},displaySurveyStep:function(e,t){var i,a,u=this.survey[e];r.trigger("abuseforms:formview:savestate",this.abuseform.get("surveyStep")),this.abuseform.set("surveyStep",e),r.trigger("Kraken:abuseform:stepviewed",{loggingData:{step:e}}),u.displayBackButton=!!this.history.length,r.trigger("drawerform:errortag:removeall");var p=this.$surveyStep.clone().addClass("dummy-step");"start"===e?(this.flaggingForm=new l({abuseform:this.abuseform}),this.$surveyStep.html(this.flaggingForm.render().$el)):(u.options&&(i=this.templates.surveyOptions(s.extend(u,this.abuseform.templateAttributes))),u.message&&(i=this.templates.surveyMessage(s.extend(u,this.abuseform.templateAttributes))),u.form&&(u.formName=e,i=this.templates.surveyForm(s.extend(u,this.abuseform.templateAttributes)),this.captcha=new c),u.stepContent=i,this.$surveyStep.html(this.templates.surveyStep(s.extend(u,this.abuseform.templateAttributes))),!this.abuseform.get("wasPreviewAutoclosed")&&this.history.length>0&&(r.trigger("abuseform:contentpreview:close"),r.trigger("Kraken:abuseform:contentpreview:close"),this.abuseform.set("wasPreviewAutoclosed",!0))),this.abuseform.navigation.update(u),this.abuseform.dynamicfields.update(),this.abuseform.update_description(u),p.appendTo(this.$surveyContainer),this.abuseform.get("mobileMode")&&p.is(":empty")||(n.animate(p,{translateX:[t?"290px":"-290px","0"],opacity:[0,1]},{duration:this.duration,easing:"easeOut",complete:function(e){o(e).remove()}}),u.options&&(a=this.$surveyStep.find(".option"),a.css("opacity",0),s.each(a,function(e,i){n.animate(e,{translateX:[0,t?"-70px":"70px"],opacity:[1,0]},{delay:this.duration/4*(i+1),duration:this.duration,easing:"easeOut"})},this)),n.animate(this.$surveyStep,{translateX:["0",t?"-290px":"290px"],opacity:[1,0]},{duration:this.duration,easing:"easeOut"})),this.submitButton=this.abuseform.$el.find("[data-survey-submit]"),r.trigger("drawerform:validation:trigger"),u.form&&(r.trigger("abuseforms:formview:restorestate",e),r.trigger("drawer:enableCloseConfirmation"))}});e.exports=g},1333:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(192),r=i(219),l=i(230),u=i(1334),p=r.extend({mixins:[l],events:{"change [data-flag-action]":"onFlagClick","click [data-submit-flag-form]":"onFlagFormSubmit",'change input[type="radio"]':"onInputChange",'change input[type="checkbox"]':"onInputChange","submit form":"onSubmit",'change input[name="block"]':"onBlockChange"},initialize:function(e){e=e||{},this.abuseform=e.abuseform,this.set("loading",!1),this.on("change:loading",this.updateLoadingIndicator),this.abuseform.set("blockFlagSet","message"!==this.abuseform.mode||!!this.abuseform.sender),this.abuseform.set("optionFlagSet",!1)},onBlockChange:function(e){
this.abuseform.set("blockFlagSet",o(e.target).prop("checked")),this.updateFlagButton()},onInputChange:function(){var e=!1;s.each(this.$radiosAndCheckboxes,function(t){e=o(t).is(":checked")||e}),this.$submitButton.attr("disabled",!e)},onFlagFormSubmit:function(e){e.preventDefault(),this.set("loading",!0);var t=[];this.$form.find("[name=flag]:checked").length&&t.push(o.ajax({url:"/svc/flag",type:"POST",data:this.getFlagRequestData(),withFormKey:!0})),this.abuseform.get("blockFlagSet")&&t.push(this.abuseform.sender?this.abuseform.sender.block():this.abuseform.tumblelog.block()),a.all(t).then(s.bind(this.onSubmitSuccess,this),s.bind(this.onSubmitError,this)).finally(s.bind(this.onCallComplete,this))},getFlagRequestData:function(){var e=this.$form.serializeArray(),t={};return s.each(e,function(e){t[e.name]=e.value}),"post"===this.abuseform.mode||"message"===this.abuseform.mode?(t.post_id=this.abuseform.posts[0].id,t.root_id=this.abuseform.posts[0].rootId,t.context=this.abuseform.mode):"blogcard"===this.abuseform.mode&&(t.context="blogcard"),t.tumblelog_name=this.abuseform.tumblelog.get("name"),t},onSubmitSuccess:function(){this.abuseform.hideFlaggedContent();var e=this.$("form").find("input[type=radio]:checked"),t={reason:e.length?e.val():"block_only"};this.abuseform.logSubmission(t),this.abuseform.displaySuccessMessage()},onSubmitError:function(){this.abuseform.displayErrorMessage()},onCallComplete:function(){this.set("loading",!1)},onSubmit:function(e){e.preventDefault()},updateLoadingIndicator:function(){this.$submitButton.toggleClass("loading",this.get("loading"))},updateFlagButton:function(){var e=o(".chrome.flag");this.abuseform.get("blockFlagSet")&&this.abuseform.get("optionFlagSet")?e.find(".label").text(n("Flag & Block")):this.abuseform.get("blockFlagSet")?e.find(".label").text(n("Block")):e.find(".label").text(n("Flag"))},onFlagClick:function(e){var t=o(e.target).data("flag-action"),i=o(".chrome.flag"),s=o(".chrome.continue");this.abuseform.set("optionFlagSet",!0),this.updateFlagButton(),"cg"===t?(i.hide(),s.show()):(i.show(),s.hide())},render:function(){return this.$el.html(u(this.abuseform.templateAttributes)),this.$form=this.$("form"),this.$submitButton=this.$("[data-submit-flag-form]"),this.$radiosAndCheckboxes=this.$('input[type="radio"], input[type="checkbox"]'),this}});e.exports=p},1334:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="form-row"><h3 class="form-subheading">'+(null==(__t=__("What's going on?"))?"":__t)+"</h3></div><form> ","message"!==mode&&(__p+=' <div class="form-row checkmark-row"><input class="option-radio" type="radio" name="flag" id="flag-nsfw" data-flag-action="nsfw" value="nsfw"><label class="option-label" for="flag-nsfw"> '+__e(__("Report sensitive content"))+" ",safesearch&&(__p+=' <div class="sub-label"> '+(null==(__t=__("Adult-oriented content is currently being hidden ( %1$s ) but this post still showed up.",'<i class="icon_lock_thick_12"></i>'))?"":__t)+" </div> "),__p+=" </label></div> "),__p+=' <div class="form-row checkmark-row"><input class="option-radio" type="radio" name="flag" id="flag-spam" data-flag-action="spam" value="spam"><label class="option-label" for="flag-spam"> '+__e(__("Report spam"))+' </label></div><div class="form-row checkmark-row"><input class="option-radio" type="radio" name="flag" id="flag-cg" data-flag-action="cg" value="cg"><label class="option-label" for="flag-cg"> '+__e(__("Report something else"))+" </label></div> ","message"===mode?(__p+=" ",sender&&(__p+=' <div class="form-row ignore"><div class="option-radio"><label class="binary_switch"><input type="checkbox" name="block" id="block" checked="checked"> <span class="binary_switch_track"></span> <span class="binary_switch_button"></span></label></div><label class="option-label" for="block"> '+(null==(__t=__("Block %1$s",sender))?"":__t)+" </label></div> "),__p+=" "):__p+=' <div class="form-row ignore"><div class="option-radio"><label class="binary_switch"><input type="checkbox" name="block" id="block" checked="checked"> <span class="binary_switch_track"></span> <span class="binary_switch_button"></span></label></div><label class="option-label" for="block"> '+(null==(__t=__("Block %1$s",tumblelog))?"":__t)+" </label></div> ",__p+=' <div class="form-row form-controls"> ',__p+="message"!==mode||sender?' <button class="chrome big red right flag" type="button" data-submit-flag-form><span class="label">'+(null==(__t=__("Block"))?"":__t)+'</span><span class="Knight-Rider-loader animate"><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span></span></button> <button class="chrome big blue right continue" type="button" data-survey-nav-to="'+(null==(__t="message"===mode?"harassment-self-message":"abuse")?"":__t)+'"><span class="label">'+(null==(__t=__("Continue"))?"":__t)+"</span></button> ":' <button class="chrome big red right flag" type="button" data-submit-flag-form disabled="disabled"><span class="label">'+__e(__("Report"))+'</span><span class="Knight-Rider-loader animate"><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span></span></button> <button class="chrome big blue right continue" type="button" data-survey-nav-to="harassment-self-message-anon-notice"><span class="label">'+(null==(__t=__("Continue"))?"":__t)+"</span></button> ",__p+=" </div></form>";return __p}.toString()).apply(void 0,_values(_imports))},1335:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="form-row"> ',hideTitles||(__p+=' <h3 class="form-subheading">'+(null==(__t=__(title))?"":__t)+"</h3> "),__p+=" ","undefined"!=typeof tagline&&(__p+=' <p class="form-subheading-tagline '+(null==(__t=hideTitles?"bold":"")?"":__t)+' ">'+(null==(__t=__(tagline))?"":__t)+"</p> "),__p+=' </div><div class="step-content"> '+(null==(__t=stepContent)?"":__t)+" </div>";return __p}.toString()).apply(void 0,_values(_imports))},1336:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="options"> ',_.each(options,function(e){__p+=" ",__p+="standalone"!==mode&&"undefined"!=typeof e.flaggingTo?' <div class="option" data-survey-nav-to="'+(null==(__t=e.flaggingTo)?"":__t)+'"> '+(null==(__t=__(e.name))?"":__t)+" </div> ":' <div class="option" data-survey-nav-to="'+(null==(__t=e.to)?"":__t)+'"> '+(null==(__t=__(e.name))?"":__t)+" </div> ",__p+=" "}),__p+=" </div>";return __p}.toString()).apply(void 0,_values(_imports))},1337:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="survey-result"> ',_.each(message,function(e){__p+=' <div class="form-row"> ',"text"===e.type?(__p+=" ",__p+="undefined"!=typeof e.link?" <p>"+(null==(__t=__(e.text,'<a target="_blank" href="'+e.link+'">',"</a>"))?"":__t)+"</p> ":" <p>"+(null==(__t=__(e.text))?"":__t)+"</p> ",__p+=" "):"link"!==e.type||inNativeApp?"highlight"===e.type&&(__p+=' <p class="highlight">'+(null==(__t=__(e.text))?"":__t)+"</p> "):__p+=' <a href="'+(null==(__t=e.href)?"":__t)+'" target="_blank">'+(null==(__t=__(e.text))?"":__t)+"</a> ",__p+=" </div> "}),__p+=" </div> ","undefined"!=typeof options&&(__p+=' <div class="options"> ',_.each(options,function(e){__p+=" ",__p+="standalone"!==mode&&"undefined"!=typeof e.flaggingTo?' <div class="option" data-survey-nav-to="'+(null==(__t=e.flaggingTo)?"":__t)+'"> '+(null==(__t=__(e.name))?"":__t)+" </div> ":' <div class="option" data-survey-nav-to="'+(null==(__t=e.to)?"":__t)+'"> '+(null==(__t=__(e.name))?"":__t)+" </div> ",__p+=" "}),__p+=" </div> ");return __p}.toString()).apply(void 0,_values(_imports))},1338:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<form class="survey-result" data-abuse-form><input type="hidden" name="form_key" value="'+__e(formKey)+'"> <input type="hidden" name="abuse_type" value="'+__e(formName)+'"> ',formToken&&(__p+=' <input type="hidden" name="form_token" value="'+__e(formToken)+'"> '),__p+=" ",languageNotice&&(__p+=' <div class="form-row"><span class="language-notice">'+__e(__("Just so you know, we're not yet able to address queries that are written in [language]. You can still use this form to contact our Support team, but you'll need to fill it out in English. Sorry about that, and thanks for your patience."))+"</span></div> "),__p+=" ",_.each(form,function(e){return __p+=" ","chat_message"===mode&&"permalink-hint"===e.groupType?void(__p+=" "):(__p+=' <div class="form-row"> ',__p+="vertical-layout"===e.groupType?' <div class="row-field"> ':"permalink-hint"===e.groupType?" <p> "+(null==(__t=__("Need help finding a permalink? Click %1$shere%2$s.",'<a href="https://tumblr.zendesk.com/hc/en-us/articles/223857008#permalink" target="_blank" rel="noopener noreferrer">',"</a>"))?"":__t)+" ":' </p><div class="row-label"> ',__p+=" ","chat_message"===mode&&(e.fields||[]).find(function(e){return"urlreporting"===e.name})||(__p+=" "+__e(__(e.groupLabel))+" "),__p+=" ",__p+="permalink-hint"===e.groupType?" <p></p> ":" </div> ",__p+=" ",__p+="vertical-layout"===e.groupType?' <div class="row-field"> ':' <div class="row-content"> ',__p+=" ",_.each(e.fields,function(e){__p+=' <div class="row-field"> ',"text"===e.type?(__p+=" ",__p+="undefined"!=typeof e.link?" <p>"+(null==(__t=__(e.text,'<a target="_blank" href="/abuse/'+_t.sanitize(e.link,!0)+'">',"</a>"))?"":__t)+"</p> ":" <p>"+__e(__(e.text))+"</p> ",__p+=" "):"input"===e.type?(__p+=" ",__p+=e.optional===!0?' <input class="text_field" name="'+__e(e.name)+'" data-validate-input="text-abuse-form" placeholder="'+__e(__(e.placeholder))+'"><div class="optional-tag">'+__e(__("Optional"))+"</div> ":' <input class="text_field" data-validate-input="text-abuse-form" required name="'+__e(e.name)+'" placeholder="'+__e(__(e.placeholder))+'"> ',__p+=" "):"post-id"===e.type?(__p+=' <input type="hidden" name="'+__e(e.name)+'" value="'+__e(posts[0].id)+'"> ',__p+=sender?' <span class="text_field input-link">'+__e(__("Message from %1$s",sender))+"</span> ":' <span class="text_field input-link">'+__e(__("Anonymous message"))+"</span> ",__p+=" "):"input-link"===e.type?(__p+=" ","urlreporting"===e.name&&"chat_message"===mode?__p+=' <input type="hidden" required name="'+__e(e.name)+'[]" value="'+__e(_.get(prefillFields,e.name,""))+'"> ':"urlreporting"===e.name&&"standalone"!==mode?(__p+=" ",posts.length>0?(__p+=" ",_.each(posts,function(t){__p+=" ",__p+=e.is_tumblr_url===!0?' <input class="text_field input-link" data-validate-input="tumblr_url" required name="'+__e(e.name)+'[]" value="'+__e(t.postUrl)+'"> ':' <input class="text_field input-link" data-validate-input="url" required name="'+__e(e.name)+'[]" value="'+__e(t.postUrl)+'"> ',__p+=" "}),__p+=" "):"undefined"!=typeof tumblelogUrl&&(__p+=" ",__p+=e.is_tumblr_url===!0?' <input class="text_field input-link" data-validate-input="tumblr_url" required name="'+__e(e.name)+'[]" value=""> ':' <input class="text_field input-link" data-validate-input="url" required name="'+__e(e.name)+'[]" value="'+__e(tumblelogUrl)+'"> ',__p+=" "),__p+=" "):(__p+=' <div class="dynamic-fields no-edit-button" data-field-group-name="'+__e(e.name)+'[]"> ',e.optional===!0?(__p+=' <div class="input-row no-remove-button"><div class="remove-url-button" data-field-group-name="'+__e(e.name)+'[]" data-remove-url-field></div> ',__p+=e.is_tumblr_url===!0?' <input class="text_field input-link" name="'+__e(e.name)+'[]" data-field-group-name="'+__e(e.name)+'[]" data-validate-input="tumblr_url" placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-original-placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-add-url-field> ':' <input class="text_field input-link" name="'+__e(e.name)+'[]" data-field-group-name="'+__e(e.name)+'[]" data-validate-input="url" placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-original-placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-add-url-field> ',__p+=' <div class="optional-tag">'+__e(__("Optional"))+"</div></div> "):(__p+=' <div class="input-row no-remove-button"><div class="remove-url-button" data-field-group-name="'+__e(e.name)+'[]" data-remove-url-field></div> ',__p+=e.is_tumblr_url===!0?' <input class="text_field input-link" data-validate-input="tumblr_url" required name="'+__e(e.name)+'[]" data-field-group-name="'+__e(e.name)+'[]" placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-original-placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-add-url-field value="'+__e(_.get(prefillFields,e.name,""))+'"> ':' <input class="text_field input-link" data-validate-input="url" required name="'+__e(e.name)+'[]" data-field-group-name="'+__e(e.name)+'[]" placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-original-placeholder="'+__e(e.placeholder?__(e.placeholder):__("URL"))+'" data-add-url-field value="'+__e(_.get(prefillFields,e.name,""))+'"> ',__p+=" </div> "),__p+=' </div><div class="url-manipulator"><div class="edit-button" data-field-group-name="'+__e(e.name)+'[]" data-edit-button>'+__e(__("Edit"))+'</div><div class="done-button" data-field-group-name="'+__e(e.name)+'[]" data-done-button>'+__e(__("Done"))+"</div></div> "),__p+=" "):"input-name"===e.type?(__p+=" ",__p+=e.optional===!0?' <input class="text_field" data-validate-input="name" name="'+__e(e.name)+'" placeholder="'+__e(__("Name"))+'"><div class="optional-tag">'+__e(__("Optional"))+"</div> ":' <input class="text_field" data-validate-input="name" required name="'+__e(e.name)+'" placeholder="'+__e(__("Name"))+'"> ',__p+=" "):"input-email"===e.type?(__p+=" ",__p+=email||prefillFields&&prefillFields[e.name]?' <input class="text_field" value="'+__e(_.get(prefillFields,e.name,email))+'" data-validate-input="email" required name="'+__e(e.name)+'" placeholder="'+__e(__("Email address"))+'"> ':' <input class="text_field" data-validate-input="email" required name="'+__e(e.name)+'" placeholder="'+__e(__("Email address"))+'"> ',__p+=" "):"textarea"===e.type?__p+=' <textarea name="'+__e(e.name)+'" data-validate-input="text-abuse-form" required cols="30" rows="5" placeholder="'+__e(__(e.placeholder))+'"></textarea> ':"file"===e.type&&supportsFileChooser?__p+=' <div class="image-upload-input"><label class="image-upload" for="image-upload"></label><input id="image-upload" class="image-upload" data-validate-input="file" required type="file" name="attachments[]" accept="image/*"></div><div class="image-upload-preview"><img src=""><div class="btn_remove btn-remove-uploaded" data-tooltip="'+__e(__("Remove image"))+'"></div></div> ':"checkbox"===e.type&&(__p+=' <div class="checkbox"><label class="binary_switch"><input type="checkbox" name="'+__e(e.name)+'" data-validate-input="checkbox" id="'+__e(e.name)+'"> <span class="binary_switch_track"></span> <span class="binary_switch_button"></span></label><label for="'+__e(e.name)+'">'+__e(__(e.text))+"</label></div> "),__p+=" </div> "}),void(__p+=" </div></div> "))}),__p+=" "+(null==(__t=recaptcha)?"":__t)+" </div></div></form>";return __p}.toString()).apply(void 0,_values(_imports))},1339:function(e,t,i){"use strict";var o=i(226),s=i(136),n=i(3),a=i(8),r=o.extend({defaults:{target:"g-recaptcha",sitekey:""},initialize:function(e){this.options=e||{};var t=document.createElement("script");t.src="//www.google.com/recaptcha/api.js?render=explicit&onload=onNocaptchaCallback",window.onNocaptchaCallback=n.bind(this.setupCaptcha,this);var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)},setupCaptcha:function(){this.sitekey=a(".g-recaptcha").data("sitekey"),window.grecaptcha.render(this.options.target||"g-recaptcha",{callback:this.options.callback||function(){},theme:this.options.theme||"light",type:this.options.type||"image",sitekey:this.options.sitekey||a(".g-recaptcha").data("sitekey")}),s&&s.on("abouttumblr:change",function(e){0!==e&&5!==e||window.grecaptcha.reset()})},refresh:function(){window.grecaptcha.reset()}});e.exports=r},1340:function(e,t){"use strict";var i="Don't engage in targeted abuse or harassment. Don’t engage in the unwanted sexualization or sexual harassment of others. If you are the target of abuse or harassment and believe that you are in danger, please immediately report the incident to your local law enforcement agency.",o="Don't encourage violence or hatred. Don't post content for the purpose of promoting or inciting the hatred of, or dehumanizing, individuals or groups based on race, ethnic or national origin, religion, gender, gender identity, age, veteran status, sexual orientation, disability, or disease.",s="Don't post content that violates anyone's privacy, especially personally identifying or confidential information like credit card numbers, social security numbers, or unlisted contact information. Absolutely do not post non-consensual pornography—that is, private photos or videos taken or posted without the subject's consent.",n="Don't post or solicit anything relating to minors that is sexually suggestive or violent.",a="Don't post content that actively promotes or glorifies self-harm. This includes content that urges or encourages others to: cut or injure themselves; embrace anorexia, bulimia, or other eating disorders; or commit suicide rather than, e.g., seeking counseling or treatment, or joining together in supportive conversation with those suffering or recovering from depression or other conditions.",r="Proper attribution is critical to Tumblr's creators, and our policies prohibit reposting without proper attribution when reblogging is possible.",l="Tumblr responds to notices of alleged copyright infringement as per our %1$sTerms of Service%2$s and the Digital Millennium Copyright Act. Please note that we require a valid and complete DMCA notice from the copyright holder or authorized representative before removing content.",u="Respect the copyrights and trademarks of others. If you aren't allowed to use someone else's copyrighted or trademarked work (either by license or by legal exceptions and limitations such as %1$sfair use%2$s), don't post it.",p="Don't do things that would cause confusion between you or your blog and a person or company, like registering a deliberately confusing URL. Don't impersonate anyone.",d="Don't post gore just to be shocking. Don't showcase the mutilation or torture of human beings, animals, or their remains.",h="Don't encourage violence or hatred. Don't post content for the purpose of promoting or inciting the hatred of, or dehumanizing, individuals or groups based on race, ethnic or national origin, religion, gender, gender identity, age, veteran status, sexual orientation, disability, or disease.",c="We don't tolerate content that promotes, encourages, or incites acts of terrorism. That includes content which supports or celebrates terrorist organizations, their leaders, or associated violent activities.",m="We don't allow sexually explicit videos to be uploaded to Tumblr. If your video was removed and you think there was a mistake (it happens), you can appeal using this form and we'll take another look.",g={start:{title:"",description:"",template:"start"},abuse:{title:"What kind of violation is it?",options:[{name:"Copyright violation",to:"copyright"},{name:"Trademark violation",to:"trademark"},{name:"Misattribution violation",to:"misattrib"},{name:"Harm to minors",to:"minors-start"},{name:"Privacy violation",to:"privacy"},{name:"Confusion or impersonation",to:"confusion"},{name:"Suicide or self-harm concern",to:"selfharm"},{name:"Hate speech violation",to:"hatespeech"},{name:"Suspected terrorism",to:"terrorism-start"},{name:"Gore, mutilation, or bestiality",to:"gore"},{name:"Violent content or threat",to:"violentthreats-start"},{name:"I’m being harassed",to:"harassment"}],prev:"start"},harassment:{title:"Harassment",tagline:"Are you the person being harassed?",description:i,options:[{name:"Yes",to:"harassment-self",flaggingTo:"harassment-self"},{name:"No",to:"harassment-someoneelse-psa"}],prev:"start"},"harassment-self":{title:"Harassment",description:i,tagline:"What kind of harassment is taking place?",options:[{name:"My privacy is being violated (e.g. explicit private photos or personal contact information).",to:"privacy-self"},{name:"I’m being threatened with specific bodily harm, theft, property damage, or financial harm.",to:"violentthreats-form"},{name:"Someone posted content sexualizing me against my wishes.",to:"harassment-self-uws"},{name:"I’m being targeted and harassed.",to:"harassment-self-psa"}],prev:"harassment"},"harassment-someoneelse-psa":{title:"Harassment",description:i,message:[{type:"text",text:"We appreciate you bringing this to our attention. In these cases, we need to hear directly from someone who is being featured or discussed on this blog."}],button:{type:"dismiss"},prev:"harassment"},"harassment-self-psa":{title:"Harrassment",description:[{type:"text",text:i},{type:"text",link:"https://tumblr.zendesk.com/hc/en-us/articles/231877648-Blocking-users",text:"You can and should stop viewing content from a blogger that bothers you. Unfollow them, to start with. You can also block them. If you need help doing so, %1$shave a look at the docs%2$s. Blocked users can't follow you, can’t see your posts on their dashboard, reblog your posts, like your posts, or do anything else with your posts. You also won't get Asks or messages from users you've blocked, and you won’t appear in their search results. If you block someone, and don't otherwise initiate contact with that person, they won’t have a way of communicating with you on Tumblr."}],options:[{name:"If using the block feature has not solved this issue, you can report it here",to:"harassment-self-where"}],prev:"harassment-self"},"harassment-self-where":{title:"Harrassment",description:i,tagline:"Where on Tumblr is the harassment taking place?",options:[{name:"Somewhere on a blog or in a post (including tags)",to:"harassment-self-blog"},{name:"In an inbox message (an Ask or Fan Mail)",to:"harassment-self-message-notice"}],prev:"harassment-self-psa"},"harassment-self-blog":{title:"Harassment",description:i,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Short explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe the harassment taking place."}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"harassment-self"},"harassment-self-uws":{title:"Harassment",description:i,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Short explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe the harassment taking place."}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"harassment-self"},"harassment-self-message":{title:"Harassment",description:i,form:[{groupLabel:"Content you're reporting",fields:[{type:"post-id",name:"post-id"}]},{groupLabel:"Short explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe the harassment taking place."}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"start"},"harassment-self-message-notice":{title:"Harassment",description:i,message:[{type:"highlight",text:"In an inbox message (an Ask or Fan Mail)"},{type:"text",text:'Good news: You can now report harassment directly from your inbox. Just go to the offending message, hit the three-dot button, and select "Flag". We\'ll help you take care of the rest.'}],button:{type:"link",href:"/inbox",text:"Go to my inbox"},prev:"harassment-self"},"harassment-self-message-anon-notice":{title:"Harassment",description:i,message:[{type:"text",text:"We're sorry you've had a negative experience with anonymous messages on Tumblr. Because not all anonymous messages are associated with a​ Tumblr​ account, we can't always take action against a specific account. However, there are some steps that you can take to prevent any further unwanted interactions."},{type:"text",link:"/docs/social#ask",text:"First, you can block the IP address from which any given anonymous message was sent. Just click or tap the ellipses on the message, select Block and you'll permanently prevent any anonymous messages from that ​IP ​address from ever getting to your inbox. Just an FYI: There is no way to undo this action. Additionally, the person sending unwanted anonymous messages could still send you anonymous messages from another IP address. If you're receiving these anonymous messages from multiple IP addresses, you can disable anonymous messages or even disable the Ask feature entirely in your blog settings. If you need help with any aspect of Asks, just check the %1$shelp docs%2$s."}],button:{type:"dismiss"},prev:"start"},"harassment-someoneelse-blog":{title:"Harassment",description:i,form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"Short explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe the harassment taking place."}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"harassment"},"violentthreats-start":{title:"Violent Content or Threat",description:o,tagline:"What are you reporting?",options:[{name:"Imagery of gore, mutilation, or bestiality",to:"gore"},{name:"Content that promotes, encourages, or incites acts of terrorism",to:"terrorism"},{name:"A specific threat directed at an individual or content that glorifies violence/the perpetrators of violence",to:"violentthreats-form"},{name:"Content for the purpose of promoting or inciting the hatred of, or dehumanizing, individuals or groups based on race, ethnic or national origin, religion, gender, gender identity, age, veteran status, sexual orientation, disability, or disease.",to:"hatespeech"}],prev:"start"},"violentthreats-form":{title:"Violent Content or Threat",description:o,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Describe, as best you can, how it violates Tumblr's Community Guidelines",fields:[{type:"textarea",name:"description",placeholder:"Short explanation"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"terrorism-start"},privacy:{title:"Privacy Violation",description:s,tagline:"Is it your privacy that's being violated?",options:[{name:"Yes",to:"privacy-self"},{name:"No",to:"privacy-someoneelse"}],prev:"start"},"privacy-someoneelse":{title:"Privacy Violation",description:s,tagline:"What kind of content are you reporting on behalf of someone else?",options:[{name:"Their name ",to:"privacy-self-name"},{name:"Their IP address ",to:"privacy-self-ip"},{name:"Their personal contact information",to:"privacy-someoneelse-form"},{name:"Unwanted sexualization",to:"harassment-someoneelse-blog"},{name:"Their explicit private images",to:"privacy-someoneelse-form"}],prev:"privacy"},"privacy-self":{title:"Privacy Violation",description:s,tagline:"What kind of content are you reporting",options:[{name:"My name ",to:"privacy-self-name"},{name:"My IP address ",to:"privacy-self-ip"},{name:"Unwanted sexualization",to:"harassment-self-blog"},{name:"My personal contact information",to:"privacy-self-form"},{name:"My explicit private images ",to:"privacy-self-image"}],prev:"privacy"},"privacy-self-name":{title:"Privacy Violation",description:s,tagline:"What kind of content are you reporting",message:[{type:"highlight",text:"Name"},{type:"text",text:"Unfortunately, your name isn't considered private information, and posting it isn't a violation of either the law or of our Community Guidelines. If you're uncomfortable with the post, try to communicate with the person who posted it and make your feelings on it known."}],button:{type:"dismiss"},prev:"privacy-self"},"privacy-self-ip":{title:"Privacy Violation",description:s,tagline:"What kind of content are you reporting",message:[{type:"highlight",text:"IP address"},{type:"text",text:"Unfortunately, your IP address isn't considered private information, and posting it isn't a violation of either the law or of our Community Guidelines. If you're uncomfortable with the post, try to communicate with the person who posted it and make your feelings on it known."}],button:{type:"dismiss"},prev:"privacy-self"},"privacy-self-form":{title:"Privacy Violation",description:s,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Some explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe, as best you can, how it violates Tumblr's Community Guidelines"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"privacy-self"},"privacy-someoneelse-form":{title:"Privacy Violation",description:s,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Some explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe, as best you can, how it violates Tumblr's Community Guidelines"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"privacy-someoneelse"},"privacy-self-image":{title:"Privacy Violation",description:s,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"privacy-self"},"minors-start":{title:"Harm to minors",description:n,options:[{name:"Is the content you are reporting suspected child sexual abuse material?",
to:"minors-csai"},{name:"Is the content you are reporting an illustration or other depiction of child sexual abuse that does not feature a real person?",to:"minors-illusticim"},{name:"Is the content you are reporting harassment of a minor?",to:"harassment"}],prev:"start"},"minors-csai":{title:"Harm to minors",description:n,form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"Some explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe, as best you can, how it violates Tumblr's Community Guidelines"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"start"},"minors-illusticim":{title:"Harm to minors",description:n,form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"Some explanation",fields:[{type:"textarea",name:"description",placeholder:"Describe, as best you can, how it violates Tumblr's Community Guidelines"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"start"},selfharm:{title:"Promotion or glorification of self-harm",description:a,tagline:"Do you think this user is in immediate danger?",options:[{name:"Yes",to:"selfharm-form-urgent"},{name:"No",to:"selfharm-form"}],prev:"start"},"selfharm-form":{title:"Promotion or glorification of self-harm",description:a,tagline:"Do you think this user is in immediate danger? - No",form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"selfharm"},"selfharm-form-urgent":{title:"Promotion or glorification of self-harm",description:a,tagline:"Do you think this user is in immediate danger? - Yes",message:[{type:"text",text:"We will review the information and may contact the blogger or the appropriate authorities to follow up. Please rest assured that these reports are kept confidential. In the meantime, we recommend that you encourage the blogger to contact a suicide prevention hotline. Support from a friend can be instrumental in getting a person the help that he or she needs."}],form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"Describe, as best you can, why you think this user is in danger",fields:[{type:"textarea",name:"description",placeholder:"Short explanation"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"selfharm"},misattrib:{title:"Misattribution or non-attribution",description:r,tagline:"Is it your work that's being misattributed, or that's missing an attribution?",options:[{name:"Yes",to:"misattrib-self"},{name:"No",to:"misattrib-someoneelse"}],prev:"misuse"},"misattrib-someoneelse":{title:"Misattribution or non-attribution",description:r,tagline:"Is it your work that's being misattributed, or that's missing an attribution?",message:[{type:"text",text:"Thanks for letting us know. Unfortunately, in situations like this, we need to hear directly from the user whose work has been misattributed, or is missing attribution. Get in contact with them if you can, and refer them to our %1$sabuse form %2$s.",link:"/abuse/misattrib"}],button:{type:"dismiss"},prev:"misattrib"},"misattrib-self":{title:"Misattribution or non-attribution",description:r,tagline:"Did you originally post this work on Tumblr, or somewhere else?",options:[{name:"I posted it to Tumblr",to:"misattrib-self-tumblr"},{name:"I posted it somewhere else",to:"misattrib-self-somewhereelse"}],prev:"misattrib"},"misattrib-self-somewhereelse":{title:"Misattribution or non-attribution",description:r,tagline:"Did you originally post this work on Tumblr, or somewhere else?",message:[{type:"highlight",text:"I posted it somewhere else"},{type:"text",text:"If you are the copyright owner, you'll need to file a request under the Digital Millenium Copyright Act (DMCA). Don't worry, we've got a form for that."},{type:"link",text:"File a DMCA request",href:"/dmca"}],button:{type:"dismiss"},prev:"misattrib-self"},"misattrib-self-tumblr":{title:"Misattribution or non-attribution",description:r,tagline:"Which of the following best describes your issue?",options:[{name:"Someone reposted it instead of reblogging it",to:"misattrib-self-tumblr-repost"},{name:"Someone reblogged it and injected a link back to their own blog",to:"misattrib-self-tumblr-link"}],prev:"misattrib-self"},"misattrib-self-tumblr-repost":{title:"Misattribution or non-attribution",description:r,form:[{groupType:"permalink-hint"},{groupLabel:"Original content",fields:[{type:"input-link",name:"urloriginal",placeholder:"URL of the original content",is_tumblr_url:!0}]},{groupLabel:"Repost",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the repost",is_tumblr_url:!0}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"misattrib-self-tumblr"},"misattrib-self-tumblr-link":{title:"Misattribution or non-attribution",description:r,form:[{groupType:"permalink-hint"},{groupLabel:"Original content",fields:[{type:"input-link",name:"urloriginal",placeholder:"URL of the original content",is_tumblr_url:!0}]},{groupLabel:"Reblog",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the reblog",is_tumblr_url:!0}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"misattrib-self-tumblr"},copyright:{title:"Copyright infringement",description:[{type:"text",text:l,link:"https://www.tumblr.com/policy/terms-of-service"}],tagline:"Did you originally post this work on Tumblr, or somewhere else?",options:[{name:"I posted it to Tumblr",to:"misattrib"},{name:"I posted it somewhere else",to:"copyright-dmca"}],button:{type:"submit"},prev:"misuse"},"copyright-dmca":{title:"Copyright infringement",description:[{type:"text",text:l,link:"https://www.tumblr.com/policy/terms-of-service"}],tagline:"Are you making a copyright claim or reporting an attribution issue?",message:[{type:"text",text:"If you are the copyright owner, you'll need to file a request under the Digital Millenium Copyright Act (DMCA). Don't worry, we've got a form for that."},{type:"link",text:"File a DMCA request",href:"/dmca"}],button:{type:"dismiss"},prev:"copyright"},trademark:{title:"Trademark infringement",description:[{type:"text",text:u,link:"https://fairuse.stanford.edu/overview/fair-use/"}],tagline:"Are you the trademark holder or an authorized representative?",options:[{name:"Yes",to:"trademark-holder"},{name:"No",to:"trademark-notholder"}],prev:"misuse"},"trademark-notholder":{title:"Trademark infringement",description:[{type:"text",text:u,link:"https://fairuse.stanford.edu/overview/fair-use/"}],tagline:"Are you the trademark holder or an authorized representative?",message:[{type:"text",text:"Thanks for bringing this to our attention, but we need to hear directly from the trademark holder or their authorized representative. Get in contact with them if you can, and refer them to our %1$sabuse form%2$s.",link:"/abuse/trademark"}],button:{type:"dismiss"},prev:"trademark"},"trademark-holder":{title:"Trademark infringement",description:[{type:"text",text:u,link:"https://fairuse.stanford.edu/overview/fair-use/"}],form:[{groupLabel:"Your information",fields:[{type:"input-name",name:"name"},{type:"input",name:"company",optional:!0,placeholder:"Your company, if applicable"},{type:"input-email",name:"email"},{type:"input",name:"contactinfo",optional:!0,placeholder:"Other contact info, like your address"}]},{groupLabel:"Trademark information",fields:[{type:"input",name:"trademark",placeholder:"Trademark"},{type:"input",name:"trademark-type",placeholder:"Type of trademark (e.g., word, design, etc)"},{type:"input",name:"trademark-jurisdiction",placeholder:"Jurisdiction"},{type:"input",name:"trademark-regnumber",optional:!0,placeholder:"Registration number (if not granted)"},{type:"input",name:"trademark-serialnumber",optional:!0,placeholder:"Serial number "}]},{groupLabel:"Registration documentation",fields:[{type:"file",name:"trademark-regdocument"},{type:"input-link",name:"urlreporting",placeholder:"URL of the content you're reporting"}]},{groupLabel:"How is this content infringing your trademark(s)?",fields:[{type:"textarea",name:"description",placeholder:"Short explanation"}]},{groupLabel:"",fields:[{type:"checkbox",name:"consent",text:"I understand that Tumblr may provide third parties, for example the reported blogger(s), with details of this report, such as the reported blog or post. Your contact information, like your email address, will not be disclosed."}]}],button:{type:"submit"},prev:"trademark"},confusion:{title:"Confusion or impersonation",description:p,tagline:"Whose identity is being impersonated or confused?",options:[{name:"My own",to:"confusion-own-start"},{name:"My company, brand, or organization",to:"trademark"},{name:"Someone else's",to:"confusion-else"}],prev:"misuse"},"confusion-own-start":{title:"Confusion or impersonation",description:p,tagline:"Is your privacy being violated (e.g. explicit private photos or personal contact information)?",options:[{name:"Yes",to:"privacy-self"},{name:"No",to:"confusion-own"}],prev:"confusion"},"confusion-own":{title:"Confusion or impersonation",description:p,form:[{groupType:"permalink-hint"},{groupLabel:"Some information about you",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]},{groupLabel:"Where confusion or impersonation takes place",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL with an example of the impersonation",is_tumblr_url:!0}]},{groupLabel:"Explain how you're being impersonated",fields:[{type:"textarea",name:"explanation",placeholder:"Short explanation"}]}],button:{type:"submit"},prev:"confusion"},"confusion-else":{title:"Confusion or impersonation",description:p,tagline:"Whose identity is being impersonated or confused?",message:[{type:"highlight",text:"Someone else's"},{type:"text",text:"We appreciate your bringing this to our attention. In these cases, we need to hear directly from the person being impersonated by this blog. Get in contact with them if you can, and refer them to our %1$sabuse form%2$s.",link:"/abuse/confusion"}],button:{type:"dismiss"},prev:"confusion"},"confusion-company-notauthorized":{title:"Confusion or impersonation",description:p,tagline:"Are you an authorized representative for the company, brand, or organization being impersonated?",message:[{type:"highlight",text:"No"},{type:"text",text:"We appreciate your bringing this to our attention. In these cases, we need to hear directly from an authorized representative for the company, brand or organization being impersonated by this blog. Get in contact with them if you can, and refer them to our %1$sabuse form%2$s.",link:"/abuse/confusion"}],button:{type:"dismiss"},prev:"confusion-company"},"confusion-company-authorized":{title:"Confusion or impersonation",description:p,tagline:"Are you reporting an impersonation/confusion issue or a trademark violation?",options:[{name:"Impersonation/confusion",to:"confusion-company-authorized-impersonation"},{name:"Trademark violation",to:"trademark"}],prev:"confusion-company"},"confusion-company-authorized-impersonation":{title:"Confusion or impersonation",description:p,form:[{groupLabel:"Some information about you",fields:[{type:"input-name",name:"name"},{type:"input-email",name:"email"}]},{groupLabel:"Information about company",fields:[{type:"input",name:"impersonated-company",placeholder:"Company/brand/organization"},{type:"input",name:"affiliation",placeholder:"Your affiliation"}]},{groupLabel:"Examples of the impersonation or confusion",fields:[{type:"input-link",name:"urlreporting"},{type:"textarea",name:"explanation",placeholder:"Explain how these examples are impersonating or causing confusion with your brand"}]}],button:{type:"submit"},prev:"confusion-company-authorized"},gore:{title:"Gore, mutilation, or bestiality",description:d,form:[{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"hateful"},hatespeech:{title:"Hate Speech",description:h,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Describe, as best you can, how it violates Tumblr's Community Guidelines",fields:[{type:"textarea",name:"description",placeholder:"Short explanation"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"hatespeech-start"},"terrorism-start":{title:"Suspected Terrorism",description:c,tagline:"What are you reporting?",options:[{name:"Imagery of gore, mutilation, or bestiality",to:"gore"},{name:"Content that promotes, encourages, or incites acts of terrorism",to:"terrorism"},{name:"A specific threat directed at an individual or content that glorifies violence/the perpetrators of violence",to:"violentthreats-form"},{name:"Content for the purpose of promoting or inciting the hatred of, or dehumanizing, individuals or groups based on race, ethnic or national origin, religion, gender, gender identity, age, veteran status, sexual orientation, disability, or disease",to:"hatespeech"}],prev:"start"},terrorism:{title:"Suspected Terrorism",description:c,form:[{groupType:"permalink-hint"},{groupLabel:"Content you're reporting",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"Describe, as best you can, how it violates Tumblr's Community Guidelines",fields:[{type:"textarea",name:"description",placeholder:"Short explanation"}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"},prev:"terrorism-start"},"video-appeal":{title:"Appeal a Video Removal",description:m,customSuccessMessage:"Cool. Your appeal has been sent. If the post was removed in error, we'll restore it. We'll let you know (either way) as soon as it's been reviewed.",form:[{groupType:"permalink-hint"},{groupLabel:"Post that was removed",fields:[{type:"input-link",name:"urlreporting",placeholder:"URL of the post",is_tumblr_url:!0}]},{groupLabel:"A little about yourself",fields:[{type:"input-name",optional:!0,name:"name"},{type:"input-email",name:"email"}]}],button:{type:"submit"}},edr:{title:"EMERGENCY DISCLOSURE REQUEST FORM",description:[{text:'Please provide completed responses to the questions on this form to assist Tumblr, Inc. ("Tumblr") in determining whether to exercise its discretion to disclose information to respond to an emergency situation.'},{text:"For more information about our Emergency Disclosure policies, please refer to %1$sTumblr's Law Enforcement Guidelines%2$s.",link:"https://tumblr.com/docs/en/law_enforcement"},{text:"Please email %1$slawenforcement@tumblr.com%2$s during business hours, if you have any questions about this form.",link:"mailto:lawenforcement@tumblr.com"}],customSuccessMessage:[{text:"We have received your emergency disclosure request and a member of our team will be in touch shortly."},{text:"For more information on Tumblr's law enforcement processes, please review our %1$sLaw Enforcement Guidelines%2$s.",link:"https://tumblr.com/docs/en/law_enforcement"}],form:[{groupType:"vertical-layout",groupLabel:"Information in Tumblr's possession that you are seeking to obtain on an emergency basis",fields:[{type:"textarea",name:"description"}]},{groupType:"vertical-layout",groupLabel:"Tumblr username/URL (e.g. staff.tumblr.com) of the account(s) containing information necessary to prevent the emergency",fields:[{type:"textarea",name:"bloginfo"}]},{groupType:"vertical-layout",groupLabel:"Identity of the individual in danger or serious physical injury",fields:[{type:"textarea",name:"identity"}]},{groupType:"vertical-layout",groupLabel:"Describe the nature of the emergency involving danger of death or serious physical injury.",fields:[{type:"textarea",name:"nature"}]},{groupType:"vertical-layout",groupLabel:"Describe the imminence of the threatened death or serious physical injury. If possible, provide information that suggests that there is a specific deadline before which it is necessary to receive the requested information.",fields:[{type:"textarea",name:"threat"}]},{groupType:"vertical-layout",groupLabel:"Explain/describe how the specific information requested will assist in averting the threatened death or serious physical injury.",fields:[{type:"textarea",name:"explanation"}]},{groupType:"vertical-layout",groupLabel:"Links to any specific posts containing relevant information",fields:[{type:"textarea",name:"links"}]},{groupType:"vertical-layout",groupLabel:"Describe and attach any other relevant details or context regarding the particular circumstances. For example, if a Tumblr post made by the user is the basis for the emergency, please include the post permalink in this form and explain its relevance in the area below.",fields:[{type:"textarea",name:"context"}]},{groupType:"vertical-layout",groupLabel:"I declare that the foregoing is true and correct."},{groupLabel:"Digital signature of Law Enforcement Officer",fields:[{type:"input-name",name:"signature"}]},{groupLabel:"Date",fields:[{type:"input",name:"date"}]},{groupLabel:"Printed Name of Law Enforcement Officer",fields:[{type:"input-name",name:"name"}]},{groupLabel:"Phone number",fields:[{type:"input",name:"phone"}]},{groupLabel:"Email address",fields:[{type:"input-email",name:"email"}]}],button:{type:"submit"}}};e.exports=g},1341:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(192),a=i(219),r=i(136),l=i(265),u=a.extend({events:{"click [data-survey-submit]":"onSubmitClick","click [data-survey-dismiss]":"onDismissClick"},initialize:function(e){this.abuseform=e.abuseform,this.savedFormState={},this.recaptcha=e.recaptcha,this.listenTo(r,"abuseforms:formview:savestate",this.saveFormState),this.listenTo(r,"abuseforms:formview:restorestate",this.restoreFormState)},onSubmitClick:function(e){switch(e.preventDefault(),this.abuseform.set("loading",!0),this.abuseform.get("surveyStep")){case"gore":case"minors":case"selfharm":var t=this.getReportedBlogs(),i=this.abuseform.templateAttributes.email;null!=i&&t?this.sendReportedBlogsToModeration(t):this.createTicket();break;default:this.createTicket()}},getReportedBlogs:function(){var e=this.$("[data-abuse-form]"),t=s.pluck(s.filter(e.serializeArray(),{name:"urlreporting[]"}),"value"),i=[];return s.each(t,function(e){var t=l.parseTumblelogUrl(e);t&&!t.post_id&&i.push(t.tumblelog_name)}),!!i.length&&i},sendReportedBlogsToModeration:function(e){var t=[];s.each(e,function(e){var i={};i.context="blog",i.flag=this.getModerationFlagType(this.abuseform.get("surveyStep")),i.tumblelog_name=e,t.push(o.ajax({url:"/svc/flag",type:"POST",data:i,withFormKey:!0}))},this),this.abuseform.get("blockFlagSet")&&t.push(this.abuseform.sender?this.abuseform.sender.block():this.abuseform.tumblelog.block()),n.all(t).done(s.bind(this.onSubmitSuccess,this),s.bind(this.onSubmitError,this))},createTicket:function(){var e=[];e.push(o.ajax({url:"/abuse/ticket/new",type:"POST",contentType:!1,processData:!1,data:this.prepareData(),withFormKey:!0})),this.abuseform.get("blockFlagSet")&&e.push(this.abuseform.sender?this.abuseform.sender.block():this.abuseform.tumblelog.block()),n.all(e).done(s.bind(this.onSubmitSuccess,this),s.bind(this.onSubmitError,this))},getModerationFlagType:function(e){switch(e){case"gore":return"gore";case"minors":return"minors";case"selfharm":return"selfharm"}},prepareData:function(){var e=this.$("[data-abuse-form]");return new FormData(e[0]||{})},saveFormState:function(e){this.$("[data-abuse-form]").length&&(this.savedFormState[e]=this.$("[data-abuse-form]").serializeArray())},restoreFormState:function(e){if(this.savedFormState[e]){var t=this.savedFormState[e];s.each(t,function(e){if(e.value&&!s.isEmpty(e.value)){var t=this.$('input[name="'+e.name+'"]').length?this.$('input[name="'+e.name+'"]'):this.$('textarea[name="'+e.name+'"]');t.val(e.value).trigger("blur")}},this),r.trigger("drawerform:validation:trigger")}},onSubmitSuccess:function(){this.abuseform.set("loading",!1),this.abuseform.hideFlaggedContent(),this.abuseform.logSubmission(),this.abuseform.displaySuccessMessage()},onSubmitError:function(e){this.abuseform.set("loading",!1);var t=o.parseJSON(e.responseText||{}),i=t.response&&t.response.errors&&t.response.errors.errors||"";this.abuseform.displayErrorMessage(i)},onDismissClick:function(){this.abuseform.get("mobileMode")?"undefined"!=typeof window.history&&window.history.length>2?window.history.go(-1):window.location="https://www.tumblr.com/dashboard":(r.trigger("abuseform:close"),r.trigger("Kraken:abuseform:close"))}});e.exports=u},1342:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(130),a=i(136),r=i(235),l=i(219),u=10,p=l.extend({events:{"click [data-edit-button]":"onEditButtonClick","click [data-done-button]":"onDoneButtonClick","keyup [data-add-url-field]":"onInputKeyup","click [data-remove-url-field]":"onRemoveButtonClick"},initialize:function(){this.editMode=!1},addAttributesToField:function(e){var t=e.find(".optional-tag").length,i=e.find("input"),o=i.data("original-placeholder"),s=i.data("field-group-name");i.attr({name:s,placeholder:o}),t||i.prop("required",!0)},addUrlField:function(e){var t=o(e.target).data("field-group-name"),i=this.containers[t],s=i.find(".input-row").last(),a=s.find("input");i.removeClass("no-edit-button"),a.attr("name")||this.addAttributesToField(s),s.removeClass("no-remove-button");var l=s.clone(!0).addClass("no-remove-button");l.find("input").val("").removeClass("error").removeAttr("required").removeAttr("name").attr("placeholder",n("Add a new URL")),r.animate(l,{opacity:[1,0]},{duration:200,easing:"easeIn"}),l.appendTo(i)},onEditButtonClick:function(e){this.enterEditMode(e)},onDoneButtonClick:function(e){this.exitEditMode(e)},onRemoveButtonClick:function(e){var t=o(e.target).data("field-group-name"),i=this.containers[t],s=o(e.target).next("input");if(a.trigger("drawerform:errortag:remove",{field:s}),o(e.target).parent().remove(),1===i.find(".input-row").length){var n=i.find(".input-row").last();i.addClass("no-edit-button"),this.addAttributesToField(n),this.exitEditMode(e)}a.trigger("drawerform:validation:trigger")},exitEditMode:function(e){this.editMode=!1;var t=o(e.target).data("field-group-name");this.containers[t].removeClass("edit-mode")},enterEditMode:function(e){this.editMode=!0;var t=o(e.target).data("field-group-name");this.containers[t].addClass("edit-mode")},onInputKeyup:function(e){if(this.editMode)return void this.exitEditMode(e);var t=o(e.target).data("field-group-name"),i=this.containers[t].find("input");i.last().val().trim().length&&i.length<u&&this.addUrlField(e)},update:function(){this.containers={};var e=this.$el.find(".dynamic-fields");e.each(s.bind(function(e,t){var i=o(t),s=o(t).data("field-group-name");this.containers[s]=i},this))}});e.exports=p},1343:function(e,t,i){"use strict";var o=i(3),s=i(219),n=i(1344),a=s.extend({className:"form-row",template:n,events:{"click [data-survey-nav-to]":"surveyLinkHandler","click [data-survey-nav-back]":"surveyBackHandler","click [data-survey-submit]":"onSubmitClick","click [data-survey-dismiss]":"onDismissClick"},initialize:function(e){e=e||{},this.abuseform=e.abuseform,this.abuseform.get("mobileMode")&&this.$el.addClass("fixed-row")},surveyLinkHandler:function(e){this.abuseform.get("mobileMode")&&this.abuseform.surveyView.surveyLinkHandler(e)},surveyBackHandler:function(e){this.abuseform.get("mobileMode")&&this.abuseform.surveyView.surveyBackHandler(e)},onSubmitClick:function(e){this.abuseform.get("mobileMode")&&this.abuseform.formView.onSubmitClick(e)},onDismissClick:function(e){this.abuseform.get("mobileMode")&&this.abuseform.formView.onDismissClick(e)},update:function(e){o.extend(e,{complete:this.abuseform.get("complete")}),this.$el.html(this.template(e)),this.abuseform.get("mobileMode")?this.$el.insertAfter(this.abuseform.$surveyContainer):this.abuseform.$surveyStep.append(this.$el)}});e.exports=a},1344:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)displayBackButton&&(__p+=' <button class="survey-back-button" data-survey-nav-back> '+(null==(__t=__("Go back"))?"":__t)+" </button> "),__p+=" ","undefined"!=typeof button&&(__p+=" ","submit"===button.type?(__p+=" ",__p+=complete?' <button class="chrome big right blue" data-survey-submit> ':' <button class="chrome big right blue" data-survey-submit disabled="disabled"> ',__p+=" ",__p+=this.abuseform.get("blockFlagSet")?' <span class="label">'+(null==(__t=__("Submit & Block"))?"":__t)+"</span> ":' <span class="label">'+(null==(__t=__("Submit"))?"":__t)+"</span> ",__p+=' <span class="Knight-Rider-loader animate"><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span><span class="Knight-Rider-bar"></span></span></button> '):"dismiss"===button.type?__p+=' <button class="chrome big right red" data-survey-dismiss><span class="label">'+(null==(__t=__("Got it"))?"":__t)+"</span></button> ":"link"===button.type&&(__p+=' <a href="https://www.tumblr.com'+(null==(__t=button.href)?"":__t)+'" class="chrome big right blue"><span class="label">'+(null==(__t=__(button.text))?"":__t)+"</span></a> "),__p+=" "),__p+="</button>";return __p}.toString()).apply(void 0,_values(_imports))},1345:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="form-container form"><div class="survey"><div class="survey-step"></div></div></div>';return __p}.toString()).apply(void 0,_values(_imports))},1346:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="form-container success"><div class="success-message"><h1 class="message-title"> '+(null==(__t=__("Got it"))?"":__t)+" </h1> ",customSuccessMessage?(__p+=" ",customSuccessMessage instanceof Array?(__p+=" ",_.each(customSuccessMessage,function(e){__p+=" ",__p+=e.link?' <p class="message-text">'+(null==(__t=__(e.text,'<a class="message-link"  target="_blank" href="'+e.link+'">',"</a>"))?"":__t)+"</p> ":' <p class="message-text">'+(null==(__t=__(e.text))?"":__t)+"</p> ",__p+=" "}),__p+=" "):__p+=' <p class="message-text"> '+__e(customSuccessMessage)+" </p> ",__p+=" "):__p+=alternativeResponseText?' <p class="message-text"> '+__e(__("Thanks for bringing this to our attention. We're looking into it."))+" </p> ":' <p class="message-text"> '+__e(__("We're on the case and we'll get back to you as soon as we can."))+' </p><p class="message-text"> '+__e(__("Also: We know it's tempting to submit the same thing a few times in hopes that it'll get addressed sooner, but really it just clogs up our system and makes it harder for us to respond quickly. We're kind of like an elevator button."))+" </p> ",__p+=" </div></div>";return __p}.toString()).apply(void 0,_values(_imports))},1347:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)errors?(__p+=" ",_.each(errors,function(e){__p+=' <div class="error-message"><div class="error-text"> '+(null==(__t=e.error)?"":__t)+" </div></div> "}),__p+=" "):__p+=' <div class="error-message"><div class="error-text"> '+(null==(__t=__("Oops. There was an error. Try again."))?"":__t)+" </div></div> ";return __p}.toString()).apply(void 0,_values(_imports))},1351:function(e,t,i){"use strict";var o=i(214),s=i(180),n=i(1352),a=o.extend({name:"elevator",selector:"body",autoAppend:!0,view:function(e){return!s.bool("is_mobile")&&new n(e)}});e.exports=a},1352:function(e,t,i){"use strict";var o=i(8),s=i(226),n=i(136),a=s.extend({template:i(1353),className:"elevator-wrapper",defaults:{fadeScrollDistance:2e3,visible:!1},events:{click:"elevate"},initialize:function(){this.listenTo(n,"DOMEventor:flatscroll",this.onScroll),this.on("change:visible",this.toggleVisibility)},elevate:function(){o("html").velocity("scroll",1e3)},onScroll:function(e){e&&(e.windowScrollY>=this.get("fadeScrollDistance")?this.set("visible",!0):this.set("visible",!1))},toggleVisibility:function(e,t){this.$el.toggleClass("visible",t)}});e.exports=a},1353:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="elevator"></div>';return __p}.toString()).apply(void 0,_values(_imports))},1361:function(e,t,i){"use strict";var o=i(187),s=i(180),n=new o({isLoggedIn:function(){return s.bool("is_logged_in")},redirect:function(e){return function(t){t.preventDefault(),window.location.href=e}},redirectLink:function(e){return e||(e="/register"),function(t){var i=t.currentTarget.attributes.href,o=e+"?redirect_to=";o+=i?encodeURIComponent(i.value):encodeURIComponent(window.location.href),t.preventDefault(),window.location.href=o}}});e.exports=n},1474:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(136),a=i(185),r=i(180),l=a.extend({defaults:{type:null,types:{},initializing:!0,pushState:!0},initialize:function(){this.promisePool={},this.listenTo(this,"change:type",this.envChanged)},setup:function(e,t){this.set({types:e,type:t},{silent:!0}),this.updateMeta()},setType:function(e){this.trigger("before:change:type",e,this.get("type")),o.find(this.get("types"),{id:e})&&e!==this.get("type")&&(this.set("type",e),o.delay(o.bind(this.updateMeta,this),200))},getType:function(){return o.find(this.get("types"),{id:this.get("type")})},getFragment:function(){return this.get("type")+window.location.search},env:function e(){var e={is_logged_in:r.bool("is_logged_in"),type:this.get("type")};return e},envChanged:function(){n.trigger("DiscoveryStateModel:change:env",{loggingData:{env:this.env()}})},updateMeta:function(){var e=this.getType();e&&this.set({blogHeader:e.blogHeader,searchHeader:e.searchHeader,showSearches:e.showSearches,showBlogs:e.showBlogs,hero:e.hero,pt:e.pt,rootUrl:e.rootUrl})},setLoading:function(e,t){this.timeout&&clearTimeout(this.timeout),this.promisePool[e]=t,this.timeout=o.defer(o.bind(this.setCallback,this))},setCallback:function(){var e=o.values(this.promisePool),t=o.keys(this.promisePool);
this.trigger("loading",t),s.when.apply(s,e).then(o.bind(function(){this.promisePool={},this.trigger("loaded",t)},this))}});e.exports=new l},1497:function(e,t,i){"use strict";function o(e,t){return t||(t={}),e.jquery?(t.el=e,t.model||(t.model=new s(t.el.data("json")))):e instanceof s?t.model=e:t.model=new s(e),new n(t)}var s=i(347),n=i(1498);e.exports=o},1498:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(138),a=i(180),r=i(136),l=i(1499),u=i(1500),p=i(1504),d=i(1515),h=i(1528),c=i(551),m=i(1197),g=i(603),_=i(265),f=i(182),b=l.extend({events:{"click .post_content a":"contentLinkClick"},hasSubViews:{header:u,content:p,footer:d,tags:h},initialize:function(e){l.prototype.initialize.apply(this,arguments),this.render()},render:function(){l.prototype.render.apply(this,arguments),this.bindEvents(),c.hasInstance()&&"photo"===this.model.get("type")&&(this.livePhoto=c.getInstance().create(this.$el.find("[data-live-photo]")));var e=this.$el.find("[data-carousel]");e.length&&(this.carousel=new m({el:e,model:this.model,redirectUrlPrimary:e.data("redirect-url-primary")}),e.append(this.carousel.render().$el));var t=this.$el.find("[data-native-audio]");return t.length&&(this.audio=new g({el:t,model:this.model,albumArt:t.data("album-art"),streamUrl:t.data("stream-url"),track:t.data("track"),artist:t.data("artist"),noId3:t.data("no-id3"),preview:!1}),t.append(this.audio.render().$el)),this},bindEvents:function(){this.listenTo(r,"flagged:"+this.model.tumblelog.get("name"),this.onFlagged),a.bool("search_post_impression_logging")&&(this.scrollMonitor=n.create(this.$el,-(this.$el.height()/2)),this.scrollMonitor.enterViewport(o.bind(this.onViewportEnter,this))),this.listenTo(this.model,"like:set",this.onLike),this.listenTo(this.model,"unlike:set",this.onUnlike),this.listenTo(this.model,"reblog:success",this.onReblog)},contentLinkClick:function(e){var t=e.currentTarget.href,i=s(e.currentTarget),o=_.parseTumblelogUrl(t),n=f();if(n&&!i.is(".sponsored_post, .read_more")&&o){var a={tumblelog_name:o.tumblelog_name};o.post_id&&(a.post_id=o.post_id),e.preventDefault(),e.stopPropagation(),r.trigger("peepr-open-request",a)}},onViewportEnter:function(e){var t={loggingData:{id:this.model.get("id"),tumblelog:this.model.get("tumblelog")}};r.trigger("search:post:impression",t),this.scrollMonitor.destroy()},onFlagged:function(e){this.$el.addClass("is_flagged")},onLike:function(){this.logEvent("like")},onUnlike:function(){this.logEvent("unlike")},onReblog:function(){this.logEvent("reblog")},loggingData:function(){return{post_id:this.model.get("id"),blog:this.model.get("tumblelog"),initiator:"post_masonry"}},logEvent:function(e){r.trigger("search-post:logging-event",e,this.loggingData())}});e.exports=b},1499:function(e,t,i){"use strict";var o=i(3),s=i(219),n=i(276),a=i(1361),r=s.extend({mixins:[n,a],initialize:function(e){this.buildSubviews(e.subViews)},buildSubviews:function(e){e||(e={}),o.forEach(this.hasSubViews,function(t,i){var s=e[i];if(s!==!1){var n={model:this.model,el:this.$('[data-subview="'+i+'"]')};e[i]&&o.isObject(e[i])&&(n.subViews=e[i]);var a=new t(n);o.result(a,"shouldAttachAsSubview")!==!1&&(this.subViews[i]=a)}},this)},attachedToDOM:function(){o(this.subViews).filter("attachedToDOM").invoke("attachedToDOM").value()},beforeTeardown:function(){return this.stopListening(this.model),this},render:function(){return this.attachSubViews(),this},afterRender:function(){this.renderSubViews()},remove:function(){this.teardown(),s.prototype.remove.apply(this,arguments)}});e.exports=r},1500:function(e,t,i){"use strict";var o=i(1499),s=i(1501),n=i(1502),a=i(1503),r=o.extend({hasSubViews:{follow:s,info:n,"reblog-follow-tray":a,"reblog-parent-follow":s}});e.exports=r},1501:function(e,t,i){"use strict";var o=i(3),s=i(6).sprintf,n=i(130),a=i(136),r=i(219),l=i(1361),u=i(230),p=r.extend({mixins:[l,u],defaults:{isParent:!1},events:function(){return{click:this.isLoggedIn()?"onClick":this.redirect("/register?redirect_to=/explore")}},initialize:function(e){this.pt=this.model.get("pt"),this.postModel=this.model,"parent"===this.$el.attr("data-follow")?(this.model=this.model.parentTumblelog,this.set("isParent",!0)):this.model=this.model.tumblelog,this.model&&this.listenTo(this.model,"change:following",this.updateFollowStatus)},onClick:function(e){e.preventDefault(),this._following()?this._confirmUnfollow():(this._logFollowingChange(!0),this.model.follow({pt:this.pt,source:"FOLLOW_SOURCE_DISCOVER_POSTS_GRID"}),this.get("isParent")||this.postModel.trigger("start_following"))},_logFollowingChange:function(e){var t=e?"post:log_follow":"post:log_unfollow",i=this.$el.closest("article"),o=JSON.parse(i.attr("data-json"));a.trigger(t,{loggingData:{postId:o.id,tumblelog:o.tumblelog,position:i.index()}})},_following:function(){return this.model.get("following")},_newlyFollowing:function(){return this._following()&&!this.$el.hasClass("is-following")},_newlyUnfollowing:function(){return!this._following()&&this.$el.hasClass("is-following")},updateFollowStatus:function(){this.$el.addClass("animating"),this._newlyFollowing()?(this.$el.addClass("is-following show-unfollow"),this.$el.css({width:this.$(".unfollow-text").width()})):this._newlyUnfollowing()&&(this.$el.removeClass("is-following"),this.$el.css({width:this.$(".follow-text").width()})),o.delay(function(e){e.removeClass("animating")},300,this.$el)},_setFollowButtonClass:function(){this.$el.toggleClass("is-following",this._following())},_confirmUnfollow:function(){var e=s(n("Are you sure you want to unfollow %1$s?"),"<strong>"+this.model.get("name")+"</strong>"),t={text:e,text_ok:n("Ok"),text_cancel:n("Nevermind")},i=this.model.requestUnfollow({pt:this.pt,source:"UNFOLLOW_SOURCE_DISCOVER_POSTS_GRID"}),o=this;i.promise.then(function(){o._logFollowingChange(!1),o.get("isParent")||o.postModel.trigger("stop_following")}),a.trigger("dialog:confirm:promise",i,t)}});e.exports=p},1502:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(136),a=i(1361),r=i(1499),l=i(659),u=i(348),p=r.extend({hidePopoverTimeout:null,mixins:[a,u],events:{click:"checkIfPremiumPost"},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.isLoggedIn()&&this.$("[data-popover-trigger]").hoverIntent({over:o.bind(this.showBlogCardPopover,this),out:o.noop,sensitivity:3})},checkIfPremiumPost:function(){this.model.get("pt")&&n.trigger("useraction:explore_click:lightbox",{model:this.model,loggingData:this.loggingData({userAction:"lightbox"})})},showBlogCardPopover:function(e){this.popover&&(this.popover.teardown(),this.popover=null);var t;t="parent"===s(e.target).attr("data-popover-trigger")?this.model.parentTumblelog:this.model.tumblelog;var i=this.$el.closest("article");n.trigger("TumblelogPopover:log_follow_open",{loggingData:{postId:this.model.get("id"),tumblelog:t.get("name"),position:i.index()}}),this.popover=new l({model:t,pinnedTarget:this.$el}),this.popover.openPopover()},hideBlogCardPopover:function(e){this.popover&&this.popover.closePopover()},teardown:function(){this.$el.off("mouseenter mouseleave")}});e.exports=p},1503:function(e,t,i){"use strict";var o=i(3),s=i(136),n=i(1361),a=i(348),r=i(219),l=i(659),u=i(669),p=r.extend({hidePopoverTimeout:null,mixins:[n,a],initialize:function(e){this.postModel=this.model,this.model=this.model.parentTumblelog,this.model&&(this.listenTo(this.postModel,"start_following",this.open),this.listenTo(this.postModel,"stop_following",this.close),this.$brick=this.$el.closest(".post_brick"),this.isLoggedIn()&&this.$("[data-popover-trigger]").hoverIntent({over:o.bind(this.showBlogCardPopover,this),out:o.noop,sensitivity:3}),this._open=!1)},open:function(){!this._open&&this.model&&(this.$brick.addClass("reblog-follow-tray-opening"),s.trigger("post:follow_tray_change"),this.$el.addClass("open"),this.$brick.addClass("reblog-follow-tray-open").removeClass("reblog-follow-tray-opening"),this.postsView||(this.postsView=new u({model:this.model,blog_bg_color:!1}),this.$el.append(this.postsView.render().el)),this._open=!0)},close:function(){this._open&&(this.$brick.addClass("reblog-follow-tray-closing"),s.trigger("post:follow_tray_change"),this.$el.removeClass("open"),this.$brick.removeClass("reblog-follow-tray-open").removeClass("reblog-follow-tray-closing"),this._open=!1)},showBlogCardPopover:function(){this.popover&&(this.popover.teardown(),this.popover=null),s.trigger("TumblelogPopover:log_follow_open",{loggingData:{postId:this.postModel.get("id"),tumblelog:this.model.get("name"),position:this.$brick.index()}}),this.popover=new l({model:this.model,pinnedTarget:this.$(".tray-header")}),this.popover.openPopover()}});e.exports=p},1504:function(e,t,i){"use strict";var o=i(180),s=i(1499),n=i(1505),a=i(1512),r=i(1513),l=i(1514),u=i(136),p=s.extend({hasSubViews:{media:n,expand:r,body:a},events:{tumblelogPopover:"__popoverLaunched"},limitHeightTo:400,limitBuffer:150,initialize:function(e){s.prototype.initialize.call(this,e),this.listenTo(u,"discover:inline-images:ready",this.limitHeight)},attachedToDOM:function(){this.limitHeight(),s.prototype.attachedToDOM.apply(this,arguments)},limitHeight:function(){if(this.limitHeightTo&&o.bool("truncate_all_brick_posts")){var e=this.$el.height();if(this.desiredHeight&&e<=this.desiredHeight)return;if(this.desiredHeight=e,e>this.limitHeightTo+this.limitBuffer){var t=new l({parent:this});t.render()}}},__popoverLaunched:function(e){this.subViews.expandContent&&this.subViews.expandContent.expand()}});e.exports=p},1505:function(e,t,i){"use strict";function o(e){var t=e.model.get("type");switch(t){case"photo":return new n(e);case"photoset":return new a(e);case"audio":return new r(e);case"video":return new s(e)}}var s=i(1506),n=i(1509),a=i(1510),r=i(1511);o.prototype.shouldAttachAsSubview=!1,e.exports=o},1506:function(e,t,i){"use strict";function o(e){var t=s(e.el),i=t.find("video[data-crt-video]");return i.length?(e.$video=i,new n(e)):new a(e)}var s=i(8),n=i(1507),a=i(1508);e.exports=o},1507:function(e,t,i){"use strict";var o=i(429),s=i(1499),n=s.extend({initialize:function(e){this.$video=e.$video||this.$("video[data-crt-video]"),this.video=this.$video[0],this.video&&o.playerFactory([this.video])}});e.exports=n},1508:function(e,t,i){"use strict";var o=i(1499),s=o.extend({events:{click:"toggleVideoPlayer"},toggleVideoPlayer:function(e){var t=this.$(".video_embed"),i=t.data("render-context"),o=this.$("script.embed_source");return"blank"===i?void window.open(t.data("post-url")):void(o.length&&(this.$(".video_poster").hide(),o.parent().html(o.html())))}});e.exports=s},1509:function(e,t,i){"use strict";var o=i(8),s=i(136),n=i(1499),a=i(348),r=i(265),l=i(182),u=n.extend({events:{click:"_onClick"},mixins:[a],_onClick:function(e){var t=this,i=o(e.currentTarget),n=i.find(".photo-clickthough");if(n.length){var a=n.attr("href");return void(r.isTumblelogUrl(a)&&a.indexOf("tagged/")>-1&&l()&&(e.preventDefault(),s.trigger("peepr-open-request",{tumblelog_name:this.model.get("tumblelog"),searchTagTerm:a.split("tagged/")[1]})))}var u=i.data("lightbox");u&&setTimeout(function(){e.isDefaultPrevented()||t._openLightbox(u)},0)},_openLightbox:function(e){s.trigger("tumblelogPopover:init",[e]),this.$el.trigger("tumblelogPopover",[{opened:!0}]),this.model.get("pt")&&s.trigger("useraction:explore_click:media",{model:this.model,loggingData:this.loggingData({userAction:"photo"})})}});e.exports=u},1510:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(136),a=i(1499),r=i(331),l=i(348),u=a.extend({events:{click:"displayShownPhotoInLightbox",mouseenter:function(){this.toggleLoader(!0)},mouseleave:function(){this.toggleLoader(!1)}},mixins:[l],initialize:function(){this.boundShowNextPhotosetPhotoAndReCycle=s.bind(this.showNextPhotosetPhotoAndReCycle,this),this.loader=new r({variation:"small"}),this.$(".photo-post-icons").append(this.loader.render().$el),this.$deferredImgs=this.$("img[data-src]"),this.$el.hoverIntent({over:s.bind(this.cyclePhotoset,this),out:s.bind(this.stopPhotosetCycle,this),interval:350})},loadDeferreds:function(){this.$deferredImgs.length&&(this.$deferredImgs.imagesLoaded(s.bind(function(){this.toggleLoader(!1),this.$deferredImgs=[],this._cycling&&this.cyclePhotoset()},this)),this.$deferredImgs.each(function(e,t){var i=o(t);i.attr("src",""),i.attr("src",i.data("src"))}))},cyclePhotoset:function(e){return this._cycling=!0,this.$deferredImgs.length?void this.loadDeferreds():(s.isNumber(e)||(e=1300),this._photosetCycleRate||this.showNextPhotosetPhoto(),this._photosetCycleRate=e,this.$photoset().css("background-color","#000"),this._photosetCycleTimeout&&clearTimeout(this._photosetCycleTimeout),this._photosetCycleTimeout=setTimeout(this.boundShowNextPhotosetPhotoAndReCycle,this._photosetCycleRate),void n.trigger("PhotosetMediaView:cycle",{view:this}))},showNextPhotosetPhotoAndReCycle:function(){this.showNextPhotosetPhoto(),this.cyclePhotoset()},showNextPhotosetPhoto:function(){var e=this.$shown().next();e.length||(e=this.$photoset().find(".photoset_photo:first")),this.$shown().removeClass("shown"),e.addClass("shown"),this._$shown=e},stopPhotosetCycle:function(){clearTimeout(this._photosetCycleTimeout),this._photosetCycleRate=null,this._cycling=!1,this.$photoset().css("background-color",""),this.toggleLoader(!1)},$photoset:function(){return"_$photoset"in this||(this._$photoset=this.$(".photoset_photos")),this._$photoset},$shown:function(){return this._$shown&&this._$shown.length||(this._$shown=this.$photoset().find(".photoset_photo.shown")),this._$shown&&this._$shown.length||(this._$shown=this.$photoset().find(".photoset_photo:last").addClass("shown")),this._$shown},toggleLoader:function(e){this.$deferredImgs.length&&(this.loader.set("loading",e),this.$el.toggleClass("loading-deferred-images",e))},displayShownPhotoInLightbox:function(e){var t=this.$shown().data("lightbox"),i=s.collect(this.$photoset().find("[data-lightbox]"),function(e){return o(e).data("lightbox")}),a=s.indexOf(i,t);n.trigger("tumblelogPopover:init",i,a+1),this.stopPhotosetCycle(),this.$el.trigger("tumblelogPopover",[{opened:!0}]),this.model.get("pt")&&n.trigger("useraction:explore_click:media",{model:this.model,loggingData:this.loggingData({userAction:"photo"})})}});e.exports=u},1511:function(e,t,i){"use strict";var o=i(1499),s=o.extend({hasSubViews:{}});e.exports=s},1512:function(e,t,i){"use strict";var o=i(1499),s=i(136),n=i(348),a=o.extend({events:{"click img":"toggle","click a":"_checkIfPremiumPost"},mixins:[n],initialize:function(e){o.prototype.initialize.call(this,e)},toggle:function(e){this.toggleThumbnail(),this.toggleHighres()},toggleThumbnail:function(){var e=this.$el.find(".image_thumbnail");if(e.length){var t=e.hasClass("enlarged");e.toggleClass("enlarged"),e.attr("width",t?e.data("thumbnail-width"):e.data("width")),e.attr("height",t?e.data("thumbnail-height"):e.data("height"))}},toggleHighres:function(){this.$el.find(".photo_info").toggleClass("hidden")},_checkIfPremiumPost:function(e){this.model.get("pt")&&s.trigger("useraction:explore_click:caption",{model:this.model,loggingData:this.loggingData({userAction:"caption"})})}});e.exports=a},1513:function(e,t,i){"use strict";var o=i(136),s=i(1499),n=s.extend({events:{click:"_onExpand"},_onExpand:function(e){e.preventDefault();var t=this.$el.parent(),i=t.find(".post_media.truncated"),s=i.find("img.photo");this.$el.remove(),i.removeClass("truncated"),i.velocity({"max-height":s.attr("height")},50,function(){o.trigger("post:photo_expanded",t)})}});e.exports=n},1514:function(e,t,i){"use strict";var o=i(3),s=i(130),n=i(136),a=i(1499),r=a.extend({events:{click:"_onClick"},className:"expand-post-content",classOnTruncatedEl:"truncated-content",transitionTime:50,initialize:function(e){this.parent=e.parent,this.parent.subViews||(this.parent.subViews={}),this.parent.subViews.expandContent=this,this.$photoPostIcons=this.parent.$(".photo-post-icons")},_onClick:function(e){this.expand()},expand:function(){this.parent.$el.velocity(this._parentDesiredCSS(),this.transitionTime,o.bind(function(){n.trigger("post:photo_expanded",this.parent.$el),n.trigger("search:post:photo_expanded",this.parent.$el)},this)),this.$photoPostIcons.velocity({bottom:this.originalPhotoPostBottom},this.transitionTime,o.bind(function(){this.$photoPostIcons.css("bottom",""),this.$photoPostIcons=null},this)),this.$el.velocity({opacity:0},this.transitionTime,o.bind(function(){this.remove(),delete this.parent.subViews.expandContent},this))},_parentTruncatedCSS:function(){return{"max-height":this.parent.limitHeightTo+this.$el.height(),overflow:"hidden"}},_parentDesiredCSS:function(){return{"max-height":this.parent.desiredHeight}},render:function(){if(a.prototype.render.apply(this,arguments),this.$el.attr("data-subview","expandContent"),this.$el.text(s("Expand")),this.parent.$el.after(this.$el),this.parent.$el.css(this._parentTruncatedCSS()),this.$photoPostIcons.length){var e=this.$photoPostIcons[0].offsetTop;if(e>this.parent.limitHeightTo){var t=e-this.parent.limitHeightTo+20;this.originalPhotoPostBottom=parseFloat(this.$photoPostIcons[0].style.bottom),this.$photoPostIcons.css({bottom:t})}}return this}});e.exports=r},1515:function(e,t,i){"use strict";var o=i(1499),s=i(1516),n=i(1527),a=o.extend({hasSubViews:{controls:s,notes:n}});e.exports=a},1516:function(e,t,i){"use strict";var o=i(1499),s=i(1517),n=i(1518),a=i(1519),r=i(1520),l=i(1521),u=i(1522),p=i(1523),d=i(1524),h=i(1526),c=o.extend({hasSubViews:{share:s,adminMenu:n,creatorMenu:a,sponsorMenu:r,ignore:l,reply:u,reblog:p,like:d,reblogGraph:h}});e.exports=c},1517:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(1499),a=i(1020),r=n.extend({events:{click:"openSharePopover"},openSharePopover:function(e){var t=o(e.currentTarget);return new a({postId:t.attr("data-post-id"),blogUuid:t.attr("data-tumblelog-uuid"),favoritesNames:s.compact([t.attr("data-tumblelog-name"),t.attr("data-parent-tumblelog-name")]),externalNetworksData:this.model.get("share_popover_data"),pinnedTarget:t}).render()}});e.exports=r},1518:function(e,t,i){"use strict";var o=i(1499),s=o.extend({});e.exports=s},1519:function(e,t,i){"use strict";var o=i(1499),s=o.extend({});e.exports=s},1520:function(e,t,i){"use strict";var o=i(1499),s=o.extend({});e.exports=s},1521:function(e,t,i){"use strict";var o=i(1499),s=o.extend({});e.exports=s},1522:function(e,t,i){"use strict";var o=i(3),s=i(1499),n=i(136),a=i(348),r=i(969),l=s.extend({events:{click:"showNotes"},mixins:[a],showNotes:function(e){n.trigger("useraction:click:post:reply",{event:e}),this.model.get("pt")&&n.trigger("useraction:explore_click:reply",{model:this.model,loggingData:this.loggingData({userAction:"reply"})}),r(o.bind(function(e){return new e({pinnedTarget:this.$el.closest(".post_footer").find(".note_link_current"),postModel:this.model}).render()},this))}});e.exports=l},1523:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(230),a=i(1499),r=i(1361),l=i(136),u=a.extend({mixins:[n,r],events:function(){return{click:this.isLoggedIn()?"onClick":this.redirectLink()}},initialize:function(){this.listenTo(this.model,"fastreblog:success",this.onFastReblogged),this.render()},render:function(){return this.$el.toggleClass("reblogged",!!this.get("startedFastReblog")||!!this.model.get("reblogged")),this.$el.toggleClass("queued",!!this.get("fastRebloggedQueue")),this.started_fast_reblog=!1,this},onClick:function(e){return e.preventDefault(),this._logReblog(),e.altKey&&!this.model.reblogged?(this.set("startedFastReblog",!0),this.model.fastReblog()):this.model.reblog()},onFastReblogged:function(e){this.set("fastReblogQueue",e);var t=s('<div class="post_reblog_poof post_poof"></div>');e&&t.addClass("queue"),this.get("startedFastReblog")||this.$el.height()>s(window).height()&&t.css("top",.5*s(window).height()),this.$el.append(t),o.delay(function(e){t.fadeOut(200,function(){t.remove(),e.render()})},300,this)},_logReblog:function(){l.trigger("post:log-reblog",{loggingData:{blog:this.model.get("tumblelog"),post_id:this.model.id,position:this.model.get("collection_index"),initiator:"post_masonry"}})}});e.exports=u},1524:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(1499),a=i(1361),r=i(136),l=i(1525),u=n.extend({heartTemplate:l,mixins:[a],events:function(){return{click:this.isLoggedIn()?"onClick":this.redirect("/register?redirect_to=/explore")}},initialize:function(e){this.listenTo(this.model,"like:set",this.updateLikeStatus),this.listenTo(this.model,"unlike:set",this.updateLikeStatus),this.render()},onClick:function(e){e.preventDefault(),this._liked()?(this.model.unlike(),this._logUnlike()):(this.model.like(),this._logLike())},render:function(){return this},_liked:function(){return this.model.get("liked")},updateLikeStatus:function(){var e=this._liked();this.$el.toggleClass("liked",e);var t=s(this.heartTemplate({liked:e}));this.$el.append(t),o.delay(function(){t.fadeOut(200,function(){t.remove()})},300)},_logLike:function(){r.trigger("post:like:set",{loggingData:{blog:this.model.get("tumblelog"),post_id:this.model.id,position:this.model.get("collection_index"),initiator:"post_masonry"}})},_logUnlike:function(){r.trigger("post:unlike:set",{loggingData:{blog:this.model.get("tumblelog"),postId:this.model.id,position:this.model.get("collection_index"),initiator:"post_masonry"}})}});e.exports=u},1525:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="post_animated_heart post_poof'+(null==(__t=liked?"":" unliked")?"":__t)+'"><span class="heart_left"></span><span class="heart_right"></span></div>';return __p}.toString()).apply(void 0,_values(_imports))},1526:function(e,t,i){"use strict";var o=i(8),s=i(136),n=i(1499),a=n.extend({events:{click:"openReblogGraph"},openReblogGraph:function(e){var t=o(e.target).closest(".reblog-graph-control");s.trigger("useraction:click:reblog-graph",{model:this.model,rootPostTs:t.data("root-post-ts"),rootPostTumblelogKey:t.data("root-post-tumblelog-key"),target:t})}});e.exports=a},1527:function(e,t,i){"use strict";var o=i(3),s=i(136),n=i(1499),a=i(348),r=i(969),l=n.extend({events:{"click .note_count":"showNotes"},mixins:[a],initialize:function(e){this.bindEvents()},bindEvents:function(){this.listenTo(this.model,"change:liked",this.updateCount)},render:function(){this.$notesLabel=this.$el.find(".note_link_current")},updateCount:function(e,t){var i,o=this.$notesLabel.text();t?(i=this.$notesLabel.data("more"),this.$notesLabel.data("less",o)):(i=this.$notesLabel.data("less"),this.$notesLabel.data("more",o)),this.$notesLabel.text(i),this.$notesLabel.attr("title",i)},showNotes:function(e){s.trigger("useraction:click:post:notes",{event:e}),this.model.get("pt")&&s.trigger("useraction:explore_click:notes",{model:this.model,loggingData:this.loggingData({userAction:"notes"})}),r(o.bind(function(e){return new e({pinnedTarget:this.$(".note_link_current"),postModel:this.model}).render()},this))}});e.exports=l},1528:function(e,t,i){"use strict";var o=i(1499),s=i(964),n=i(136),a=i(348),r=o.extend({mixins:[s,a],events:{"click .post_tag":"_checkIfPremiumPost"},_checkIfPremiumPost:function(e){this.model.get("pt")&&n.trigger("useraction:explore_click:tag_click",{model:this.model,loggingData:this.loggingData({userAction:"tag_click"})})}});e.exports=r},1530:function(e,t,i){"use strict";var o=i(3),s=i(219),n=i(1531),a=i(1533),r=i(1535),l=s.extend({defaults:{types:[]},initialize:function(e){o.defaults(e,this.defaults),this.collection=new a(e.types),this.collection.onStateModelChange(),this.tabsView=new n({collection:this.collection}),this.render()},render:function(){this.$el.append(this.tabsView.render().$el),this.setControlWidth(),this.setupOverflowHandler()},setControlWidth:function(){function e(e){var t=window.getComputedStyle(e,null);return e.offsetWidth+(parseInt(t.getPropertyValue("margin-left"),10)||0)+(parseInt(t.getPropertyValue("margin-right"),10)||0)}for(var t=this.$(".content-control").not(".more-controls"),i=t.length,o=3,s=0;s<i;s++){var n=t[s];n.style.width=e(n)+o+"px",n.style["font-weight"]=""}},setupOverflowHandler:function(){this.tabOverflowHandler=new r({el:this.$(".more-controls"),collection:this.collection})}});e.exports=l},1531:function(e,t,i){"use strict";var o=i(8),s=i(219),n=i(1532),a=s.extend({className:"types-tabs",template:n,events:{"click [data-content-type]":"onContentTypeClick"},initialize:function(){this.bindEvents()},bindEvents:function(){this.listenTo(this.collection,"change:active",this.toggleActive),this.listenTo(this.collection,"change:visible",this.toggleTabVisibility)},render:function(){return this.$el.html(this.template(this.serialize())),this},serialize:function(){return{types:this.collection.toJSON()}},toggleActive:function(e,t){this.$("[data-content-type="+e.id+"]").toggleClass("active",t)},toggleTabVisibility:function(e,t){this.$("[data-content-type="+e.id+"]").toggleClass("hidden",!t),this.$(".more-controls").toggleClass("hidden",!this.collection.hasHidden())},onContentTypeClick:function(e){if(this.collection.isPushState()&&!e.metaKey&&!e.altKey){e.preventDefault();var t=o(e.currentTarget);this.collection.setActive(t.data("contentType"))}}});e.exports=a},1532:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)_.forEach(types,function(e){__p+=' <a href="'+__e(e.rootUrl)+'" class="content-control '+(null==(__t=e.active?"active":"")?"":__t)+'" style="font-weight:bold" data-text="'+__e(e.name)+'" data-content-type="'+__e(e.id)+'"> ',e.showSponsoredBadge&&(__p+=' <div class="sponsored_badge light mini"><div class="sponsored_badge_icon"><span class="dollar_sign">$</span> <span class="ring"></span></div></div> '),__p+=" "+__e(e.name)+" </a> "}),__p+=' <span class="content-control more-controls hidden"><span class="type-text">'+__e(__("More"))+'</span><i class="icon_arrow_carrot_down"></i></span>';return __p}.toString()).apply(void 0,_values(_imports))},1533:function(e,t,i){"use strict";var o=i(3),s=i(190),n=i(1534),a=i(1474),r=s.extend({model:n,initialize:function(){this.listenTo(a,"change:type",this.onStateModelChange)},isPushState:function(){return a.get("pushState")},onStateModelChange:function(){this.setActive(a.get("type"))},getActive:function(){return this._activeTab},setActive:function(e){var t=this.get(e);if(t){if(this._activeTab){if(this._activeTab.id===e)return;this._activeTab.set("active",!1)}t.set("active",!0),this._activeTab=t,a.setType(this._activeTab.id)}},getHidden:function(){return o.invoke(this.where({visible:!1}),"toJSON")},hasHidden:function(){return this.where({visible:!1}).length>0}});e.exports=r},1534:function(e,t,i){"use strict";var o=i(185),s=o.extend({defaults:{visible:!0,active:!1}});e.exports=s},1535:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(219),a=i(136),r=i(1536),l=n.extend({events:{click:"onMoreClick"},defaults:{parentSelector:".content-controls",buffer:180},initialize:function(e){this.options=o.defaults(e,this.defaults),this.$typeText=this.$(".type-text"),this.initialMoreText=this.$typeText.text(),this.controlEls=s(".types-tabs > .content-control").not(".more-controls"),this.bindEvents(),this.refresh()},bindEvents:function(){this.listenTo(a,"DOMEventor:flatresize",o.throttle(o.bind(this.refresh,this),500)),this.listenTo(this.collection,"change:active",this.updateText)},refresh:function(){var e=s(this.options.parentSelector).width(),t=this.getBuffer(),i=[];this.collection.invoke("set",{visible:!0}),this.popover&&(this.popover.hide(),this.popover=null),o.each(this.controlEls,function(o){var n=s(o),a=this.collection.get(n.data("content-type"));a.get("showSponsoredBadge")||(t+=n.outerWidth(),e<=t&&i.push(a))},this),i.length>1&&o.invoke(i,"set",{visible:!1}),this.updateText()},getBuffer:function(){var e=this.collection.where({showSponsoredBadge:!0}),t=this.options.buffer;return e.length&&o.each(e,function(e){t+=s('[data-content-type="'+e.id+'"]').outerWidth()},this),t},updateText:function(){var e=this.collection.findWhere({active:!0,visible:!1});this.$typeText.text(e?e.get("name"):this.initialMoreText),this.$el.toggleClass("active","undefined"!=typeof e)},onMoreClick:function(){this.popover=new r({collection:this.collection,pinnedTarget:this.$el,popoverContainer:s(".types-tabs"),shift:{x:10,y:50}}).render()}});e.exports=l},1536:function(e,t,i){"use strict";var o=i(3),s=i(219),n=i(284),a=i(220).transition,r=i(276),l=i(283),u=i(1537),p=s.extend({className:"popover--discover-tabs",events:{"click .content-control":"hide"},template:u,mixins:[r,l],render:function(){var e={types:this.collection.getHidden(),currentType:"todo-fix-this"};return this.$el.html(this.template(e)),this.$main=this.$el.find(".popover"),o.delay(o.bind(function(){this.$main.addClass("popover--active"),this.bindClickOutside()},this),1),this},bindClickOutside:function(){this.clickOutside=new n(this.el,{preventInteraction:!0}),this.clickOutside.on("click:outside",this.hide,this)},unbindClickOutside:function(){this.clickOutside&&(this.clickOutside.remove(),this.clickOutside=null)},hide:function(){this.unbindClickOutside(),this.$main.removeClass("popover--active"),a(this.$el,o.bind(function(){this.afterHide()},this))},afterHide:function(){this.remove()}});e.exports=p},1537:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="popover popover_menu popover_gradient"><div class="popover_inner"><ul class="popover_inner_list"> ',_.forEach(types,function(e){__p+=" ",e.active||(__p+=' <li class="popover_menu_item" data-js-menu-item><a href="/explore/'+__e(e.id)+'" class="content-control '+(null==(__t=e.id==currentType?"active":"")?"":__t)+'" style="font-weight:bold" data-text="'+__e(e.name)+'" data-content-type="'+__e(e.id)+'"> '+__e(e.name)+" </a></li> "),__p+=" "}),__p+=" </ul></div></div>";return __p}.toString()).apply(void 0,_values(_imports))},1538:function(e,t,i){"use strict";var o=i(219),s=i(136),n=i(8),a=i(3),r=o.extend({className:"point-follow",styles:{position:"fixed",top:-75,left:-75,height:150,width:150,"z-index":999,transform:"translate3d(-999px,-999px,0)"},initialize:function(e){e=e||{},this.styles=a.extend({},this.styles,e.styles),this.bindEvents(),this.render()},render:function(){return this.$el.css(this.styles),this.$el.appendTo("body"),this},bindEvents:function(){n(window).on("mousemove.pointFollow",a.bind(this.onMouseMove,this)),this.listenTo(s,"DOMEventor:flatscroll",this.onWindowScroll,this)},onMouseMove:function(e){this.mousePosX=e.clientX,this.mousePosY=e.clientY},onWindowScroll:function(){this.timeout&&clearTimeout(this.timeout),this.timeout=a.delay(a.bind(this.onScrollStop,this),350),this.$el.css("transform","translate3d("+this.mousePosX+"px,"+this.mousePosY+"px, 0)")},onScrollStop:function(){this.$el.css("transform","translate3d(-999px,-999px, 0)"),this.timeout=null}});e.exports=r},1723:function(e,t,i){"use strict";var o=i(1724);i(1743),o.start()},1724:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(5),a=i(129),r=i(180),l=i(136),u=i(1351),p=i(182),d=i(429),h=i(236),c=i(1725),m=i(1321),g=i(1727),_=i(1730),f=i(1733),b=i(1736),v=i(1737),y=i(1530),w=i(1474),k=n.extend({root:"/search/",routes:{":search":"index",":search/recent":"recent",":search/web":"web"},initialize:function(){this.crtControl=d,this.user=p(),a.has("Components/PaginationRoadblock")&&(this.paginationRoadblock=new g),a.has("Components/PostFormBuilder")&&(this.postFormBuilder=new h,this.postFormBuilder.listenTo(l,"SearchRouter:routeChange",this.postFormBuilder.updateBaseRoute)),this.listenTo(l,"SearchRouter:navigateTo",this.navigateTo),
this.on("route",this.routeChange),r.bool("discovery_hub_access")&&(this.elevator=new u,this.elevator.view&&this.elevator.view.set("fadeScrollDistance",1e3),this.setupControls(),this.setupSearchHeader()),this.abuseForm=new m,r.bool("tumblr_tv")&&!r.bool("is_mobile")&&(this.searchTvIcon=new _),r.bool("is_logged_in")&&r.bool("followed_searches_big_web")&&(this.searchFollowButton=new f),r.bool("yahoo_view_promotion")&&(this.yahooViewLink=new v),this.searchStickySidebar=new b},getData:function(e){return a.get("Components/"+e)},logs:function(){return o.union([i(1740)],n.prototype.logs.apply(this))},setupSearchHeader:function(){this.subHeader=new c({model:this.stateModel,el:".search_sub_header"}).render()},navigateTo:function(e,t){this.navigate(e.replace(this.root,""),t)},routeChange:function(){l.trigger("SearchRouter:routeChange")},index:function(){l.trigger("SearchModel:setPostMode","top")},recent:function(){l.trigger("SearchModel:setPostMode","recent")},web:function(){l.trigger("SearchModel:setPostMode","web")},setupControls:function(){var e=this.getData("DiscoveryControls"),t=o.extend({el:s(".content-controls")},e);this.controls=new y(t),w.set("pushState",!1)}});e.exports=k},1725:function(e,t,i){"use strict";function o(e){return new s(e)}var s=i(1726);e.exports=o},1726:function(e,t,i){"use strict";var o=i(219),s=i(136),n=i(8),a=i(180),r=o.extend({initialize:function(){this.bindEvents()},bindEvents:function(){this.listenTo(s,"SearchModel:change:query",this.newQuery),this.listenTo(s,"SearchModel:fetch_posts:success",this.onFetchComplete)},newQuery:function(e,t){this.$(".search_term_heading").text(t)},onFetchComplete:function(e,t){if(a.bool("hide_search_term")){var i=n("#search_posts").children().length||t.response.posts_html;i||this.$(".search_term_heading").text("")}}});e.exports=r},1727:function(e,t,i){"use strict";var o=i(214),s=i(1728),n=o.extend({name:"PaginationRoadblock",selector:"body",autoAppend:!0,view:function(){return new s(this.data)}});e.exports=n},1728:function(e,t,i){"use strict";var o=i(3),s=i(226),n=i(136),a=i(1729),r=i(129),l=s.extend({template:a,className:"road-block-wrapper",events:{"click .login-signup-button":"trackClick"},defaults:{showScrollDistance:1200,visible:!1,shouldShowBlock:!1,slideOutDistance:"485px",copy_bucket:"",context:"",copy:"",max_autopaginates:null,term:""},initialize:function(e){e.context||(e.context=r.get("Context/name")),this.options=o.defaults({},e,this.defaults),this.listenTo(n,"DOMEventor:flatscroll",this.onScroll),e.max_autopaginates>=0&&this.listenTo(n,"Autopaginate:check_pagination",this.setPagination),"search"===this.get("context")&&this.listenTo(n,"SearchRouter:navigateTo",this.updateRoadblock),this.loggingData=o.pick(this.options,"copy_bucket","max_autopaginates","term","context")},updateRoadblock:function(e){var t=e.split("/");this.set("term",t[t.length-1]),this.loggingData.term=this.get("term"),this.render()},trackClick:function(){n.trigger("roadblock:click",{loggingData:this.loggingData})},onScroll:function(e){if(e){var t=e.windowScrollY>=this.get("showScrollDistance");this.set("shouldShowBlock",t),this.get("shouldShowBlock")!==this.get("visible")&&(this.set("visible",!this.get("visible")),this.toggleRoadblock(this.get("visible")))}},setPagination:function(){n.trigger("Autopaginate:set_pagination",this.options)},toggleRoadblock:function(e){var t=e?"0":this.get("slideOutDistance");this.$el.css({transform:"translate3d("+t+", 0px, 0px)"})},render:function(){return this.$el.html(this.template(this.attributes)),this}});e.exports=l},1729:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="road-block"><div class="copy"><span class="posts-copy">'+__e(sprintf(copy,term))+'</span></div><a href="/register?ref=logged_out_search" class="login-signup-button chrome blue signup">'+__e(__("Sign up for Tumblr"))+"</a></div>";return __p}.toString()).apply(void 0,_values(_imports))},1730:function(e,t,i){"use strict";var o=i(214),s=i(1731),n=o.extend({name:"SearchTvIcon",selector:".search_control.post_layout",autoAppend:!0,view:s});e.exports=n},1731:function(e,t,i){"use strict";var o=i(3),s=i(226),n=i(136),a=i(1732),r=s.extend({template:a,className:"search-tv-icon",events:{click:"_onClick"},defaults:{query:""},initialize:function(e){this.options=o.extend({},this.defaults,e),this._bindEventListeners()},_bindEventListeners:function(){this.listenTo(n,"SearchModel:change:query",this._onSearchModelQueryChange),this.listenTo(n,"SearchModel:initialized",this._onSearchModelInitialized)},_onSearchModelInitialized:function(e){this.query=e.get("query")},_onSearchModelQueryChange:function(e,t){this.query=t},_onClick:function(e){""===this.query?document.location.pathname="/tv":document.location.pathname="/tv/"+this.query,e.preventDefault()}});e.exports=r},1732:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<a href="/tv" class="search_control_button tv_view_toggle" data-action-toggle-tv><div class="tv_icon">TV</div><span class="tooltip">'+__e(__("TV View"))+"</span></a>";return __p}.toString()).apply(void 0,_values(_imports))},1733:function(e,t,i){"use strict";var o=i(214),s=i(1734),n=o.extend({name:"SearchFollowButton",selector:".ui_search .search_form_field",autoAppend:!0,view:s});e.exports=n},1734:function(e,t,i){"use strict";var o=i(3),s=i(8),n=i(226),a=i(136),r=i(1735),l=n.extend({template:r,defaults:{query:"",isFollowing:!1},events:{click:"_onClick"},className:"search-follow-button show-unfollow hidden",tagName:"div",padding:10,initialize:function(e){this.options=o.extend({},this.defaults,e),this._bindEventListeners(),this.$searchInput=s("#search_query")},_bindEventListeners:function(){this.listenTo(a,"SearchModel:change:isFollowing",this._onSearchModelChange),this.listenTo(a,"SearchModel:initialized",this._onSearchModelChange)},_onSearchModelChange:function(e){this.isFollowing=e.get("isFollowing"),this.query=e.get("query"),this.displayFollowing()},_onClick:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.isFollowing?"/untrack_tag/":"/track_tag/";t+=encodeURIComponent(this.query),s.ajax({url:t,method:"POST",withFormKey:!0}),this.isFollowing=!this.isFollowing,this.displayFollowing()},displayFollowing:function(){this.$el.removeClass("hidden"),this.$el.toggleClass("is-following",this.isFollowing);var e=this.isFollowing?this.$el.find(".unfollow-text"):this.$el.find(".follow-text");this.$searchInput.css({paddingRight:e.width()+2*this.padding})}});e.exports=l},1735:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="follow-text">'+__e(__("Follow"))+'</div><div class="unfollow-text">'+__e(__("Unfollow"))+"</div>";return __p}.toString()).apply(void 0,_values(_imports))},1736:function(e,t,i){"use strict";var o=i(8),s=i(3),n=i(138),a=i(136),r=i(214),l=r.extend({name:"SearchStickySidebar",selector:"[data-search-sticky-sidebar]",defaults:{topOffset:104},initialize:function(){this.$container=o(this.container),!this.$container.length>0||(this.$stickyElement=this.$container.find("[data-search-sticky-sidebar-content]"),this.scrollMonitor=n.create(this.$container,this.get("topOffset")),this.scrollMonitor.partiallyExitViewport(s.bind(this.unstick,this)),this.scrollMonitor.fullyEnterViewport(s.bind(this.stick,this)),this.scrollMonitor.update(),this.listenTo(a,"search:posts:fade-in",this.fadeIn),this.listenTo(a,"search:change:filter_nsfw",this.checkNsfw))},stick:function(){this.scrollMonitor.isAboveViewport&&(this.$stickyElement.addClass("stuck"),this.$stickyElement.css({top:this.get("topOffset")}))},unstick:function(){this.scrollMonitor.isBelowViewport&&(this.$stickyElement.removeClass("stuck"),this.$stickyElement.css({top:""}))},fadeIn:function(){this.$container.find(".post_fade").removeClass("post_fade")},checkNsfw:function(e){e.get("filter_nsfw")||(o("body").removeClass("flag--search-results-sidebar"),this.$container.remove(),this.remove())},beforeRemove:function(){this.scrollMonitor.destroy()}});e.exports=l},1737:function(e,t,i){"use strict";var o=i(214),s=i(1738),n=o.extend({name:"YahooViewLink",selector:"[data-yahoo-view-link]",autoAppend:!0,view:function(){return new s(this.data)}});e.exports=n},1738:function(e,t,i){"use strict";var o=i(3),s=i(226),n=i(136),a=i(130),r=i(1739),l=s.extend({template:r,defaults:{url:"",query:""},initialize:function(e){this.set("url",e.url),this.listenTo(n,"search:yahoo-view:change",this.onDataChange),this.listenTo(n,"SearchModel:initialized",this.onSearchModelInitialized),this.listenTo(n,"SearchModel:change:query",this.onQueryChange)},onDataChange:function(e){this.set("url",e.url||""),this.render()},onSearchModelInitialized:function(e){this.set("query",e.get("query"))},onQueryChange:function(e,t){t!==this.get("query")&&(this.set("query",t),this.set("url",""),this.render())},getTemplateData:function(){return{url:this.get("url"),text:a("Watch free on Yahoo View")}},afterRender:function(){o.defer(o.bind(this.fadeIn,this))},fadeIn:function(){this.$(".yahoo-view-link-container").removeClass("faded")}});e.exports=l},1739:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)url&&text&&(__p+=' <div class="yahoo-view-link-container faded"><a href="'+__e(url)+'" target="_blank" class="yahoo-view-link"><i class="icon icon_rounded_play"></i>'+__e(text)+"</a></div> ");return __p}.toString()).apply(void 0,_values(_imports))},1740:function(e,t,i){"use strict";var o=i(136),s=i(1120),n=i(1122),a=i(1741),r=s.extend({events:{"search:post:impression":"logPostImpression"},initialize:function(){this.listenTo(o,"search:session:change:uuid",this.updateUUID)},log:function(){this.logger.trigger.apply(this.logger,arguments)},updateUUID:function(e){this.logger=new a({uuid:e.uuid,init_event:!1}),n.watch(this.logger)},logPostImpression:function(e,t){this.log("search:post:impression",t)}});e.exports=r},1741:function(e,t,i){"use strict";var o=i(1129),s=i(1742),n=o.extend({log_key:"search_post_impressions",EventClass:s});e.exports=n},1742:function(e,t,i){"use strict";function o(e){return n.isString(e)?e:JSON.stringify(e)}function s(e,t,i){this.name=t,this.log_key=n.result(e,"log_key"),this.data=i||null;var s=r(),a=n.result(e,"generate_relative_id"),l=e.uuid,u=null;i&&i.id&&(u=i.id);var p=null;i&&i.tumblelog&&(p=i.tumblelog);var d={category:this.log_key},h=5,c=new Array(h);c[0]=o(s),c[1]=o(l),c[2]=o(a),c[3]=o(u),c[4]=o(p),d.fields=c,this.json=d}var n=i(3),a=i(972),r=a.getRealNow;e.exports=s},1743:function(e,t,i){"use strict";var o=i(237);o({"Tumblr.Prima.SearchExplorePostViewBuilder":i(1497),"Tumblr.Prima.embedHarness":i(942),"Tumblr.Prima.PointerFollow":i(1538),Masonry:i(482)})},1744:function(e,t){},1745:function(e,t){},1746:function(e,t){},1747:function(e,t){},1748:function(e,t){},1749:function(e,t){},1750:function(e,t){},1751:function(e,t){}});